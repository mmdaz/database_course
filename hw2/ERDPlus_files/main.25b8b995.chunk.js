(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,t,a){var n=a(226).format;function r(e){this.er="string"===typeof e?JSON.parse(e):e}e.exports=r,r.prototype.convert=function(){return this.init(),this.convertRegularEntities(),this.convertRegularRelationships(),this.convertUnaryRelationships(),this.convertPendingMultivaluedAttributes(),this.convertPendingAssociativeEntities(),this.positionTables(),this.rs},r.prototype.init=function(){this.pendingMultivaluedAttributes=[],this.pendingAssociativeEntities=[],this.idMap={},this.nextId=1,this.relationshipHistory=[],this.rs={version:2,www:"erdplus.com",shapes:[],connectors:[],width:this.er.width,height:this.er.height}},r.prototype.convertRegularEntities=function(){var e=this.er.shapes.filter(function(e){return"Entity"===e.type}),t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value,c=this.newTable(o.details.id);c.details.name=o.details.name,this.convertEntityAttributes(c,o),this.rs.shapes.push(c),"associative"===o.details.type&&this.pendingAssociativeEntities.push(c)}}catch(l){a=!0,n=l}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}},r.prototype.convertPendingAssociativeEntities=function(){var e=!0,t=!1,a=void 0;try{for(var n,r=this.pendingAssociativeEntities[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var i=n.value,o=!0,c=!1,l=void 0;try{for(var s,u=i.details.attributes[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;d.fk&&(d.pkMember=!0)}}catch(m){c=!0,l=m}finally{try{o||null==u.return||u.return()}finally{if(c)throw l}}}}catch(m){t=!0,a=m}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}},r.prototype.convertEntityAttributes=function(e,t){var a,n=this.getAttributesByOwnerId(t.details.id),r=!0,i=!1,o=void 0;try{for(var c,l=n[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value;void 0!==a||!s.details.isUnique||"string"!==typeof s.details.name||"id"!==s.details.name.substr(-2).toLowerCase()||s.details.isDerived||s.details.isComposite||s.details.isMultivalued||(a=s.details.id)}}catch(k){i=!0,o=k}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=!0,d=!1,m=void 0;try{for(var p,h=n[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var g=p.value;void 0!==a||!g.details.isUnique||g.details.isDerived||g.details.isComposite||g.details.isMultivalued||(a=g.details.id)}}catch(k){d=!0,m=k}finally{try{u||null==h.return||h.return()}finally{if(d)throw m}}var f=!0,b=!1,E=void 0;try{for(var v,y=n[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var C=v.value;void 0===a&&C.details.isUnique&&!C.details.isDerived&&C.details.isComposite&&!C.details.isMultivalued&&(a=C.details.id)}}catch(k){b=!0,E=k}finally{try{f||null==y.return||y.return()}finally{if(b)throw E}}var w=!0,O=!1,x=void 0;try{for(var S,D=n[Symbol.iterator]();!(w=(S=D.next()).done);w=!0){var A=S.value;if(A.details.isDerived);else if(A.details.isComposite){var j=this.convertComponentAttributes(this.getAttributesByOwnerId(A.details.id));if(A.details.isUnique)if(A.details.id===a)j.forEach(function(e){e.pkMember=!0});else{var I=j.map(function(e){return e.id});e.details.uniqueGroups.push(I)}e.details.attributes=e.details.attributes.concat(j)}else if(A.details.isMultivalued)this.pendingMultivaluedAttributes.push({table:e,entity:t,attribute:A});else{var T=this.newColumn(A.details.id);T.names.push(A.details.name),T.optional=A.details.isOptional,A.details.isUnique&&(A.details.id===a?T.pkMember=!0:T.soloUnique=!0),e.details.attributes.push(T)}}}catch(k){O=!0,x=k}finally{try{w||null==D.return||D.return()}finally{if(O)throw x}}},r.prototype.convertComponentAttributes=function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value,l=this.newColumn(c.details.id);l.names.push(c.details.name),t.push(l)}}catch(s){n=!0,r=s}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t},r.prototype.convertPendingMultivaluedAttributes=function(){var e=!0,t=!1,a=void 0;try{for(var r,i=this.pendingMultivaluedAttributes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,c=this.newColumn();c.pkMember=!0,c.names.push(o.attribute.details.name);var l=this.newTable();l.details.name=n("%s_%s",o.table.details.name,o.attribute.details.name),l.details.attributes.push(c),this.rs.shapes.push(l),this.connectTables(o.table,l).pkMember=!0}}catch(s){t=!0,a=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}},r.prototype.convertRegularRelationships=function(){var e=this.er.shapes.filter(function(e){return"Relationship"===e.type&&e.details.slots[0].entityId!==e.details.slots[1].entityId}),t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.details.isIdentifying&&this.convertOneRelationship(o)}}catch(p){a=!0,n=p}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}var c=!0,l=!1,s=void 0;try{for(var u,d=e[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var m=u.value;m.details.isIdentifying||this.convertOneRelationship(m)}}catch(p){l=!0,s=p}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}},r.prototype.convertOneRelationship=function(e){var t,a=e.details.slots;if("one"===a[0].cardinality&&"one"===a[1].cardinality)"optional"===a[0].participation&&"optional"===a[1].participation?(t=this.connectTables(a[0].entityId,a[1].entityId,e)).optional=!0:t="mandatory"===a[1].participation?this.connectTables(a[0].entityId,a[1].entityId,e):this.connectTables(a[1].entityId,a[0].entityId,e),t.pkMember=e.details.isIdentifying;else if("one"===a[0].cardinality&&"many"===a[1].cardinality){var n=this.connectTables(a[1].entityId,a[0].entityId,e);n.optional="optional"===a[0].participation,n.pkMember=e.details.isIdentifying}else if("many"===a[0].cardinality&&"one"===a[1].cardinality){var r=this.connectTables(a[0].entityId,a[1].entityId,e);r.optional="optional"===a[1].participation,r.pkMember=e.details.isIdentifying}else if("many"===a[0].cardinality&&"many"===a[1].cardinality){var i=this.newTable(e.details.id);this.rs.shapes.push(i),i.details.name=e.details.name;var o=this.connectTables(a[0].entityId,i,e),c=this.connectTables(a[1].entityId,i,e),l=!1,s=this.getAttributesByOwnerId(e.details.id),u=!0,d=!1,m=void 0;try{for(var p,h=s[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var g=p.value,f=this.newColumn(g.details.id);f.names.push(g.details.name),!l&&g.details.isUnique&&(f.pkMember=!0,l=!0),i.details.attributes.push(f)}}catch(b){d=!0,m=b}finally{try{u||null==h.return||h.return()}finally{if(d)throw m}}l?i.details.uniqueGroups.push([o.id,c.id]):(o.pkMember=!0,c.pkMember=!0)}},r.prototype.convertUnaryRelationships=function(){var e=this.er.shapes.filter(function(e){return"Relationship"===e.type&&!e.details.isIdentifying&&e.details.slots[0].entityId===e.details.slots[1].entityId}),t=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var c=i.value,l=c.details.slots;if("one"===l[0].cardinality||"one"===l[1].cardinality){var s=this.connectTables(l[0].entityId,l[1].entityId,c);s.names[0]=n("%s_%s",c.details.name,s.names[0]),s.optional="optional"===l[0].participation||"optional"===l[1].participation}else if("many"===l[0].cardinality&&"many"===l[1].cardinality){var u=this.newTable(c.details.id);u.details.name=c.details.name,this.rs.shapes.push(u);var d=this.connectTables(l[0].entityId,c.details.id,c);d.names[0]=n("%s_1",d.names[0]),d.pkMember=!0;var m=this.connectTables(l[0].entityId,c.details.id,c);m.names[0]=n("%s_2",m.names[0]),m.pkMember=!0}}}catch(p){a=!0,r=p}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}},r.prototype.newTable=function(e){return{type:"Table",details:{name:"",x:0,y:0,sort:"automatic",attributes:[],uniqueGroups:[],id:this.mapId(e)}}},r.prototype.newColumn=function(e){return{names:[],order:0,pkMember:!1,optional:!1,soloUnique:!1,fk:!1,dataType:"int",dataTypeSize:null,id:this.mapId(e)}},r.prototype.newConnector=function(){return{type:"TableConnector",details:{fkAttributeId:null,id:this.mapId()},source:null,destination:null}},r.prototype.createFk=function(e){var t=this.newColumn();t.references=[],t.fk=!0;for(var a=0;a<e.details.attributes.length;++a){var n=e.details.attributes[a];if(n.pkMember)if(n.fk)for(var r=0;r<n.names.length;++r)t.names.push(n.names[r]),t.references.push({tableId:e.details.id,attributeId:n.id,fkSubIndex:r});else t.names.push(n.names[0]),t.references.push({tableId:e.details.id,attributeId:n.id})}return t},r.prototype.connectTables=function(e,t,a){"number"===typeof e&&(e=this.findTableyByMappedId(e)),"number"===typeof t&&(t=this.findTableyByMappedId(t));var n=this.recordRelationshipHistory(e.details.id,t.details.id),r=this.createFk(e);if(t.details.attributes.push(r),n>1){var i=[],o=!0,c=!1,l=void 0;try{for(var s,u=r.names[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;i.push(a.details.name+d)}}catch(p){c=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(c)throw l}}r.names=i}var m=this.newConnector();return m.details.fkAttributeId=r.id,m.source=e.details.id,m.destination=t.details.id,this.rs.connectors.push(m),r},r.prototype.recordRelationshipHistory=function(e,t){var a=this.relationshipHistory.find(function(a){return a.pkTableId===e&&a.fkTableId===t});return a?(a.count=a.count+1,a.count):(this.relationshipHistory.push({pkTableId:e,fkTableId:t,count:1}),1)},r.prototype.mapId=function(e){if(this.idMap.hasOwnProperty(e))return this.idMap[e];var t=this.nextId;return this.nextId+=1,"number"===typeof e&&(this.idMap[e]=t),t},r.prototype.positionTables=function(){for(var e=this.rs.shapes.filter(function(e){return"Table"===e.type}),t=Math.ceil(Math.sqrt(e.length)),a=10,n=0;n<e.length;){var r=e.slice(n,n+t);n+=t;for(var i=0,o=0;o<r.length;++o){var c=r[o];i=Math.max(i,c.details.attributes.length),c.details.x=10+165*o,c.details.y=a}a+=15*(i+1)}},r.prototype.getAttributesByOwnerId=function(e){var t=this;return this.er.shapes.filter(function(a){return"Attribute"===a.type&&t.er.connectors.some(function(t){return t.source===a.details.id&&t.destination===e})},this)},r.prototype.findTableyByMappedId=function(e){var t=this.mapId(e);return this.rs.shapes.find(function(e){return"Table"===e.type&&e.details.id===t})}},250:function(e,t,a){var n=a(226).format;function r(e){this.diagram="string"===typeof e?JSON.parse(e):e}e.exports=r,r.prototype.columnTypes=[{id:"none",name:"No Data Type",sql:"NODATATYPE",hasSize:!1},{id:"custom",name:"Custom Data Type",sql:"",hasSize:!0},{id:"charn",name:"CHAR(n)",sql:"CHAR",hasSize:!0},{id:"varcharn",name:"VARCHAR(n)",sql:"VARCHAR",hasSize:!0},{id:"int",name:"INT",sql:"INT",hasSize:!1},{id:"numeric",name:"NUMERIC(p s)",sql:"NUMERIC",hasSize:!0},{id:"date",name:"DATE",sql:"DATE",hasSize:!1},{id:"float",name:"FLOAT",sql:"FLOAT",hasSize:!1}],r.prototype.generate=function(){return this.initSqlTables(),this.processAttributes(),this.processUnique(),this.resolveFkColumnDataTypes(),this.resolveFkReferenceNames(),this.sortTables(),this.toSqlLines(),this.toSql()},r.prototype.initSqlTables=function(){this.tables={};var e=!0,t=!1,a=void 0;try{for(var n,r=this.diagram.shapes[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var i=n.value;"Table"!==i.type&&"Fact"!==i.type&&"Dimension"!==i.type||(this.tables[i.details.id]={name:i.details.name,original:i,columns:{},foreignKeys:[],requiredTables:[]})}}catch(o){t=!0,a=o}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}},r.prototype.processAttributes=function(){for(var e in this.tables){var t=this.tables[e],a=!0,r=!1,i=void 0;try{for(var o,c=t.original.details.attributes[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;if(l.fk){t.foreignKeys.push({names:l.names,references:l.references});var s=0;for(var u in l.names){var d=l.names[u],m=l.references[s];t.columns[n("%s-%s",l.id,s)]={name:d,pkMember:l.pkMember,optional:l.optional,fk:!0,reference:{tableId:m.tableId,columnId:m.attributeId,fkSubIndex:m.fkSubIndex}},s+=1}}else t.columns[l.id]={name:l.names[0],pkMember:l.pkMember,optional:l.optional,dataType:this.getSqlDataType(l.dataType,l.dataTypeSize)}}}catch(p){r=!0,i=p}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}}},r.prototype.processUnique=function(){for(var e in this.tables){var t=this.tables[e];t.unique=[];var a=!0,n=!1,r=void 0;try{for(var i,o=t.original.details.attributes[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value;c.soloUnique&&!c.pkMember&&t.unique.push([c.id])}}catch(l){n=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}t.unique=t.unique.concat(t.original.details.uniqueGroups)}},r.prototype.resolveFkColumnDataTypes=function(){for(var e in this.tables){var t=this.tables[e];for(var a in t.columns){var n=t.columns[a];n.fk&&(n.dataType=this.resolveDataType(n.reference.tableId,n.reference.columnId,n.reference.fkSubIndex))}}},r.prototype.resolveDataType=function(e,t,a){var r=void 0;if("number"===typeof a){var i=n("%s-%s",t,a);r=this.tables[e].columns[i]}else r=this.tables[e].columns[t];if(void 0===r)return"(not found)";if("string"===typeof r.dataType)return r.dataType;if(r.fk){var o=this.resolveDataType(r.reference.tableId,r.reference.columnId,r.reference.fkSubIndex);return r.dataType=o,o}},r.prototype.resolveFkReferenceNames=function(){for(var e in this.tables){var t=this.tables[e],a=!0,n=!1,r=void 0;try{for(var i,o=t.foreignKeys[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value,l=c.references[0].tableId;c.referencedTableName=this.tables[l].name;var s=!0,u=!1,d=void 0;try{for(var m,p=c.references[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var h=m.value,g=this.resolveFkReferenceName(h.tableId,h.attributeId,h.fkSubIndex);h.name=g}}catch(f){u=!0,d=f}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}catch(f){n=!0,r=f}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}},r.prototype.resolveFkReferenceName=function(e,t,a){var r=void 0;if("number"===typeof a){var i=n("%s-%s",t,a);r=this.tables[e].columns[i]}else r=this.tables[e].columns[t];return r?r.name:"missing"},r.prototype.resolveAllFkReferenceNames=function(e,t){for(var a=[],r=0,i=n("%s-%s",t,r);e.columns.hasOwnProperty(i);)a.push(e.columns[i].name),i=n("%s-%s",t,r+=1);return a},r.prototype.sortTables=function(){var e=!0,t=!1,a=void 0;try{for(var n,r=this.diagram.connectors[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var i=n.value;if("TableConnector"===i.type){var o=i.source,c=i.destination;this.tables[c].requiredTables.push(o)}}}catch(y){t=!0,a=y}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}var l=[],s=0,u={};do{for(var d in s=0,this.tables){var m=!0,p=!0,h=!1,g=void 0;try{for(var f,b=this.tables[d].requiredTables[Symbol.iterator]();!(p=(f=b.next()).done);p=!0){var E=f.value;m=m&&u[E]}}catch(y){h=!0,g=y}finally{try{p||null==b.return||b.return()}finally{if(h)throw g}}m&&(s+=1,l.push(this.tables[d]),delete this.tables[d],u[d]=!0)}}while(s>0);for(var v in this.tables)l.push(this.tables[v]),delete this.tables[v];this.tables=l},r.prototype.toSqlLines=function(){var e=!0,t=!1,a=void 0;try{for(var n,r=this.tables[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var i=n.value;i.lines=[],i.lines.push(this.formatCreateTable(i.name)),i.lines.push("(");var o=[];for(var c in i.columns){var l=i.columns[c];o.push(this.formatColumn(l.name,l.dataType,l.optional))}var s=[];for(var u in i.columns){var d=i.columns[u];d.pkMember&&s.push(d.name)}s.length>0&&o.push(this.formatPrimaryKey(s));var m=!0,p=!1,h=void 0;try{for(var g,f=i.foreignKeys[Symbol.iterator]();!(m=(g=f.next()).done);m=!0){var b=g.value,E=b.references.map(function(e){return e.name});o.push(this.formatForeignKey(b.names,E,b.referencedTableName))}}catch(M){p=!0,h=M}finally{try{m||null==f.return||f.return()}finally{if(p)throw h}}var v=!0,y=!1,C=void 0;try{for(var w,O=i.unique[Symbol.iterator]();!(v=(w=O.next()).done);v=!0){var x=w.value,S=[],D=!0,A=!1,j=void 0;try{for(var I,T=x[Symbol.iterator]();!(D=(I=T.next()).done);D=!0){var k=I.value;if(void 0===i.columns[k]){var N=this.resolveAllFkReferenceNames(i,k);S=S.concat(N)}else S.push(i.columns[k].name)}}catch(M){A=!0,j=M}finally{try{D||null==T.return||T.return()}finally{if(A)throw j}}o.push(this.formatUnique(S))}}catch(M){y=!0,C=M}finally{try{v||null==O.return||O.return()}finally{if(y)throw C}}for(var R=0;R<o.length-1;++R)o[R]=o[R]+",";i.lines=i.lines.concat(o),i.lines.push(");"),i.lines.push("")}}catch(M){t=!0,a=M}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}},r.prototype.toSql=function(){var e=[],t=!0,a=!1,n=void 0;try{for(var r,i=this.tables[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;e=e.concat(o.lines)}}catch(c){a=!0,n=c}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return e.join("\n")},r.prototype.formatCreateTable=function(e){return n("CREATE TABLE %s",this.sanitizeName(e))},r.prototype.formatColumn=function(e,t,a){return n(a?"  %s %s":"  %s %s NOT NULL",this.sanitizeName(e),t)},r.prototype.formatUnique=function(e){return n("  UNIQUE (%s)",this.sanitizeName(e).join(", "))},r.prototype.formatPrimaryKey=function(e){return n("  PRIMARY KEY (%s)",this.sanitizeName(e).join(", "))},r.prototype.formatForeignKey=function(e,t,a){return n("  FOREIGN KEY (%s) REFERENCES %s(%s)",this.sanitizeName(e).join(", "),this.sanitizeName(a),this.sanitizeName(t).join(", "))},r.prototype.getSqlDataType=function(e,t){if("custom"===e)return t;var a=t;return"string"===typeof a&&a.length>0?("("!==a.charAt(0)&&(a="("+a),")"!==a.charAt(a.length-1)&&(a+=")")):a="",n("%s%s",this.mapSqlDataType(e),a)},r.prototype.mapSqlDataType=function(e){for(var t=0;t<this.columnTypes.length;++t){var a=this.columnTypes[t];if(a.id===e)return a.sql}return e},r.prototype.sanitizeName=function(e){if(Array.isArray(e)){var t=[],a=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value;t.push(this.sanitizeName(c))}}catch(l){n=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t}return e.replace(new RegExp(" ","g"),"_")}},299:function(e,t,a){e.exports=a(564)},307:function(e,t,a){},564:function(e,t,a){"use strict";a.r(t);var n,r,i,o=a(0),c=a.n(o),l=a(56),s=a.n(l),u=(a(307),a(15)),d=a(16),m=a(18),p=a(17),h=a(19),g=a(6),f=a(457),b=a(568),E=a(571),v=a(13),y=a(11),C=a(8),w=a.n(C),O=a(123),x=a.n(O),S=a(124),D=a.n(S),A=a(569),j=a(7),I=a(37),T=Object(I.createActions)({login:["email","password","history"],loginSuccess:["session"],loginFailure:null,logout:["history"],logoutSuccess:null,verifyToken:["history"],verifyTokenSuccess:["session"],verifyTokenFailure:null,facebookLogin:["response","history"],googleLogin:["idToken","history"]}),k=T.Types,N=T.Creators,R=Object(I.createReducer)({verifyTokenComplete:!1,isLoggedIn:!1,session:{}},(n={},Object(j.a)(n,k.LOGIN,function(e){return e}),Object(j.a)(n,k.LOGIN_SUCCESS,function(e,t){return Object(g.a)({},e,{session:t.session,isLoggedIn:!0})}),Object(j.a)(n,k.LOGIN_FAILURE,function(e){return e}),Object(j.a)(n,k.LOGOUT,function(e){return e}),Object(j.a)(n,k.LOGOUT_SUCCESS,function(e){return Object(g.a)({},e,{isLoggedIn:!1,session:{}})}),Object(j.a)(n,k.VERIFY_TOKEN,function(e){return e}),Object(j.a)(n,k.VERIFY_TOKEN_SUCCESS,function(e,t){return Object(g.a)({},e,{session:t.session,isLoggedIn:!0,verifyTokenComplete:!0})}),Object(j.a)(n,k.VERIFY_TOKEN_FAILURE,function(e){return Object(g.a)({},e,{isLoggedIn:!1,verifyTokenComplete:!0})}),Object(j.a)(n,k.FACEBOOK_LOGIN,function(e){return e}),Object(j.a)(n,k.GOOGLE_LOGIN,function(e){return e}),n)),M=k,F=N,P=Object(I.createActions)({setBusy:null,clearBusy:null,showToast:["message"],hideToast:null}),_=P.Types,L=P.Creators,B=Object(I.createReducer)({busy:!1,toast:!1,toastMessage:""},(r={},Object(j.a)(r,_.SET_BUSY,function(e){return Object(g.a)({},e,{busy:!0})}),Object(j.a)(r,_.CLEAR_BUSY,function(e){return Object(g.a)({},e,{busy:!1})}),Object(j.a)(r,_.SHOW_TOAST,function(e,t){return Object(g.a)({},e,{toast:!0,toastMessage:t.message})}),Object(j.a)(r,_.HIDE_TOAST,function(e){return Object(g.a)({},e,{toast:!1})}),r)),U=L,G=a(567),q=a(134),z=a.n(q),W=a(125),H=a.n(W),K=a(103),V=a.n(K),Y=a(176),Q=a.n(Y),J=a(231),X=a.n(J),Z=a(230),$=a.n(Z),ee=a(59),te=a.n(ee),ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){a.props.logout(a.props.history)},a.hideToast=function(){a.props.hideToast()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,a=e.name,n=e.busy,r=e.toast,i=e.toastMessage,o=e.classes;return c.a.createElement("header",{className:o.header},c.a.createElement(x.a,{position:"static",color:"primary"},c.a.createElement(D.a,null,c.a.createElement(w.a,{className:o.button,component:A.a,to:"/"},c.a.createElement($.a,null)),c.a.createElement(w.a,{className:o.button,component:A.a,to:"/faq"},"FAQ"),!t&&c.a.createElement(w.a,{className:o.button,component:A.a,to:"/standalone"},"Try It!"),t&&c.a.createElement(w.a,{className:o.button,component:A.a,to:"/account"},a),t&&c.a.createElement(w.a,{className:o.button,component:A.a,to:"/documents"},"Documents"),t&&c.a.createElement(w.a,{className:o.button,onClick:this.handleLogout},"Logout"),!t&&c.a.createElement(w.a,{className:o.button,component:A.a,to:"/create-account"},"Signup"),!t&&c.a.createElement(w.a,{className:o.button,component:A.a,to:"/login"},"Login"),n&&c.a.createElement(z.a,{className:o.spinner}))),c.a.createElement(H.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,autoHideDuration:7e3,onClose:this.hideToast},c.a.createElement(V.a,{"aria-describedby":"client-snackbar",className:o.snackbar,message:c.a.createElement("span",{id:"client-snackbar",className:o.snackbarMessage},c.a.createElement(Q.a,{className:o.snackbarIcon}),i),action:c.a.createElement(te.a,{key:"close","aria-label":"Close",color:"inherit",className:o.snackbarClose,onClick:this.hideToast},c.a.createElement(X.a,null))},c.a.createElement(Q.a,null))))}}]),t}(o.Component),ne=Object(y.withStyles)(function(e){return{header:{zIndex:e.zIndex.appBar},"@keyframes rotator":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},button:{color:"#ffffff"},spinner:{animation:"rotator 1.4s linear infinite",width:50,height:50},snackbar:{backgroundColor:e.palette.error.dark},snackbarClose:{padding:e.spacing.unit/2},snackbarIcon:{opacity:.9,marginRight:e.spacing.unit},snackbarMessage:{display:"flex",alignItems:"center"}}})(Object(G.a)(Object(v.b)(function(e){return{isLoggedIn:e.auth.isLoggedIn,name:e.auth.session.name,busy:e.global.busy,toast:e.global.toast,toastMessage:e.global.toastMessage}},function(e){return{logout:function(t){return e(F.logout(t))},hideToast:function(){return e(U.hideToast())}}})(ae))),re=a(1),ie=a.n(re),oe=a(23),ce=a.n(oe),le=a(9),se=a.n(le),ue=a(45),de=a.n(ue),me=Object(I.createActions)({createAccount:["name","email","password","history"],getAccount:null,getAccountSuccess:["account"],getAccountFailure:null,editName:null,updateTemporaryName:["temporaryName"],cancelEditName:null,updateAccount:["name"],updateAccountSuccess:["account"],updateAccountFailure:null,editPassword:null,cancelEditPassword:null,changePassword:["currentPassword","newPassword"],changePasswordSuccess:null,changePasswordFailure:null,changeConfirmDeleteAccount:["confirmDeleteAccount"],deleteAccount:["history"],deleteAccountSuccess:null,deleteAccountFailure:null}),pe=me.Types,he=me.Creators,ge=Object(I.createReducer)({account:{},name:"",role:"",createdAt:"",temporaryName:"",showEditName:!1,showEditPassword:!1,confirmDeleteAccount:!1},(i={},Object(j.a)(i,pe.CREATE_ACCOUNT,function(e){return e}),Object(j.a)(i,pe.GET_ACCOUNT,function(e){return e}),Object(j.a)(i,pe.GET_ACCOUNT_SUCCESS,function(e,t){return Object(g.a)({},e,{account:t.account,name:t.account.name,role:t.account.role,createdAt:t.account.createdAt})}),Object(j.a)(i,pe.GET_ACCOUNT_FAILURE,function(e){return e}),Object(j.a)(i,pe.EDIT_NAME,function(e){return Object(g.a)({},e,{showEditName:!0,temporaryName:e.name})}),Object(j.a)(i,pe.UPDATE_TEMPORARY_NAME,function(e,t){return Object(g.a)({},e,{temporaryName:t.temporaryName})}),Object(j.a)(i,pe.CANCEL_EDIT_NAME,function(e){return Object(g.a)({},e,{showEditName:!1})}),Object(j.a)(i,pe.UPDATE_ACCOUNT,function(e){return e}),Object(j.a)(i,pe.UPDATE_ACCOUNT_SUCCESS,function(e,t){return Object(g.a)({},e,{showEditName:!1,account:t.account,name:t.account.name,role:t.account.role,createdAt:t.account.createdAt})}),Object(j.a)(i,pe.UPDATE_ACCOUNT_FAILURE,function(e){return e}),Object(j.a)(i,pe.EDIT_PASSWORD,function(e){return Object(g.a)({},e,{showEditPassword:!0})}),Object(j.a)(i,pe.CANCEL_EDIT_PASSWORD,function(e){return Object(g.a)({},e,{showEditPassword:!1})}),Object(j.a)(i,pe.CHANGE_PASSWORD,function(e){return e}),Object(j.a)(i,pe.CHANGE_PASSWORD_SUCCESS,function(e){return Object(g.a)({},e,{showEditPassword:!1})}),Object(j.a)(i,pe.CHANGE_PASSWORD_FAILURE,function(e){return Object(g.a)({},e,{showEditPassword:!1})}),Object(j.a)(i,pe.CHANGE_CONFIRM_DELETE_ACCOUNT,function(e,t){return Object(g.a)({},e,{confirmDeleteAccount:t.confirmDeleteAccount})}),Object(j.a)(i,pe.DELETE_ACCOUNT,function(e){return e}),Object(j.a)(i,pe.DELETE_ACCOUNT_SUCCESS,function(e){return e}),Object(j.a)(i,pe.DELETE_ACCOUNT_FAILURE,function(e){return e}),i)),fe=pe,be=he,Ee=a(33),ve=a(105),ye=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={currentPassword:"",newPassword:"",newPassword2:"",isCurrentPasswordDirty:!1,isNewPasswordDirty:!1,isNewPassword2Dirty:!1},a.handleEditName=function(){a.props.editName()},a.handleNameChange=function(e){var t=e.target.value;a.props.updateTemporaryName(t)},a.handleCancelEditName=function(){a.props.cancelEditName()},a.handleSaveEditName=function(){var e=a.props,t=e.temporaryName;(0,e.updateAccount)(t)},a.handleChangePassword=function(){a.setState({currentPassword:"",newPassword:"",newPassword2:"",isCurrentPasswordDirty:!1,isNewPasswordDirty:!1,isNewPassword2Dirty:!1}),a.props.editPassword()},a.handleCancelChangePassword=function(){a.props.cancelEditPassword()},a.handleSaveChangePassword=function(){var e=a.state,t=e.currentPassword,n=e.newPassword;a.props.changePassword(t,n)},a.handleCurrentPasswordChange=function(e){a.setState({currentPassword:e.target.value,isCurrentPasswordDirty:!0})},a.handleNewPasswordChange=function(e){a.setState({newPassword:e.target.value,isNewPasswordDirty:!0})},a.handleNewPassword2Change=function(e){a.setState({newPassword2:e.target.value,isNewPassword2Dirty:!0})},a.handleConfirmDeleteChanged=function(){var e=a.props,t=e.confirmDeleteAccount;(0,e.changeConfirmDeleteAccount)(!t)},a.deleteAccount=function(){a.props.deleteAccount(a.props.history)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/account")}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.name,n=e.temporaryName,r=e.showEditName,i=e.showEditPassword,o=e.confirmDeleteAccount,l=this.props.session.identity,s=null;if(this.props.account.email){var u=this.props.account.email,d=this.state,m=d.currentPassword,p=d.newPassword,h=d.newPassword2,g=d.isCurrentPasswordDirty,f=d.isNewPasswordDirty,b=d.isNewPassword2Dirty,E=!m||p.length<8||p!==h,v=g&&0===m.length?"Enter current password":"",y=f&&p.length<8?"Password must be longer than 8 characters":"",C=b&&p!==h?"Passwords do not match":"";s=c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:3}),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(de.a,{className:t.paper},c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h6"},"Password")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"body1"},u)),i&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"currentPassword",label:"Current Password",margin:"normal",className:t.textField,type:"password",helperText:v,value:m,onChange:this.handleCurrentPasswordChange})),i&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"newPassword",label:"New Password",margin:"normal",className:t.textField,type:"password",helperText:y,value:p,onChange:this.handleNewPasswordChange})),i&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"newPassword2",label:"Confirm New Password",margin:"normal",className:t.textField,type:"password",helperText:C,value:h,onChange:this.handleNewPassword2Change})),c.a.createElement(ie.a,{item:!0,xs:12,className:t.buttonGridItem},!i&&c.a.createElement(w.a,{className:t.button,variant:"outlined",onClick:this.handleChangePassword},"Change"),i&&c.a.createElement(w.a,{className:t.button,variant:"outlined",onClick:this.handleCancelChangePassword},"Cancel"),i&&c.a.createElement(w.a,{className:t.button,variant:"outlined",color:"primary",onClick:this.handleSaveChangePassword,disabled:E},"Save"))))),c.a.createElement(ie.a,{item:!0,xs:3}))}var O=null;this.props.account.facebookId&&(O=c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:3}),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(de.a,{className:t.paper},c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h6"},"Logged in with Facebook")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"body1"},this.props.account.facebookId))))),c.a.createElement(ie.a,{item:!0,xs:3})));var x=null;return this.props.account.googleId&&(x=c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:3}),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(de.a,{className:t.paper},c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h6"},"Logged in with Google")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"body1"},this.props.account.googleId))))),c.a.createElement(ie.a,{item:!0,xs:3}))),c.a.createElement("section",{className:t.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h4"},"Account Information")),c.a.createElement(ie.a,{item:!0,xs:3}),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(de.a,{className:t.paper},c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h6"},"Name")),c.a.createElement(ie.a,{item:!0,xs:12},!r&&c.a.createElement(se.a,{variant:"body1"},a),r&&c.a.createElement(ce.a,{id:"name",margin:"normal",className:t.textField,value:n,onChange:this.handleNameChange})),c.a.createElement(ie.a,{item:!0,xs:12,className:t.buttonGridItem},!r&&c.a.createElement(w.a,{className:t.button,variant:"outlined",onClick:this.handleEditName},"Edit"),r&&c.a.createElement(w.a,{className:t.button,variant:"outlined",onClick:this.handleCancelEditName},"Cancel"),r&&c.a.createElement(w.a,{className:t.button,variant:"outlined",color:"primary",onClick:this.handleSaveEditName},"Save"))))),c.a.createElement(ie.a,{item:!0,xs:3})),"email"===l&&s,"facebook"===l&&O,"google"===l&&x,c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:3}),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(de.a,{className:t.paper},c.a.createElement(ie.a,{container:!0,className:t.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h6"},"Delete Account")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ve.b,{control:c.a.createElement(ve.a,{checked:o,onChange:this.handleConfirmDeleteChanged}),label:"Permanently delete account. The account will be deleted as soon as you press 'Delete' below."})),c.a.createElement(ie.a,{item:!0,xs:12,className:t.buttonGridItem},!r&&c.a.createElement(w.a,{className:t.button,color:"primary",variant:o?"contained":"outlined",disabled:!o,onClick:this.deleteAccount},"Delete"))))),c.a.createElement(ie.a,{item:!0,xs:3})))}}]),t}(o.Component),Ce=Object(y.withStyles)(function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},contentArea:{height:"100%"},grid:{paddingTop:3*e.spacing.unit,textAlign:"center"},paper:{padding:3*e.spacing.unit},textField:{width:"100%"},buttonGridItem:{width:"100%",textAlign:"right"},button:{marginLeft:e.spacing.unit,width:120}}})(Object(G.a)(Object(v.b)(function(e){return{name:e.account.name,temporaryName:e.account.temporaryName,showEditName:e.account.showEditName,showEditPassword:e.account.showEditPassword,createdAt:e.account.createdAt,account:e.account.account,session:e.auth.session,confirmDeleteAccount:e.account.confirmDeleteAccount}},function(e){return{editName:function(){return e(be.editName())},updateTemporaryName:function(t){return e(be.updateTemporaryName(t))},cancelEditName:function(){return e(be.cancelEditName())},updateAccount:function(t){return e(be.updateAccount(t))},editPassword:function(){return e(be.editPassword())},changePassword:function(t,a){return e(be.changePassword(t,a))},cancelEditPassword:function(){return e(be.cancelEditPassword())},changeConfirmDeleteAccount:function(t){return e(be.changeConfirmDeleteAccount(t))},deleteAccount:function(t){return e(be.deleteAccount(t))}}})(ye))),we=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",email:"",password:"",confirmPassword:"",isPasswordDirty:!1,isConfirmPasswordDirty:!1},a.handleSubmit=function(){var e=a.state,t=e.name,n=e.email,r=e.password;a.props.createAccount(t,n,r,a.props.history)},a.handleNameChange=function(e){a.setState({name:e.target.value})},a.handleEmailChange=function(e){a.setState({email:e.target.value})},a.handlePasswordChange=function(e){a.setState({password:e.target.value,isPasswordDirty:!0})},a.handleConfirmPasswordChange=function(e){a.setState({confirmPassword:e.target.value,isConfirmPasswordDirty:!0})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/create-account")}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.password,r=e.confirmPassword,i=e.isPasswordDirty,o=e.isConfirmPasswordDirty,l=this.props.classes,s=!t||!a||!n||n.length<8||n!==r,u=i&&n.length<8?"Password must be longer than 8 characters":"",d=o&&n!==r?"Passwords do not match":"";return c.a.createElement("section",{className:l.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,className:l.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h4"},"Create Account")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"name",label:"Name",margin:"normal",className:l.textField,value:t,onChange:this.handleNameChange})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"email",label:"Email",margin:"normal",className:l.textField,value:a,onChange:this.handleEmailChange})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"password",label:"Password",margin:"normal",className:l.textField,value:n,onChange:this.handlePasswordChange,helperText:u,type:"password"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"confirmPassword",label:"Confirm Password",margin:"normal",className:l.textField,value:r,onChange:this.handleConfirmPasswordChange,helperText:d,type:"password"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{className:l.submitButton,variant:"outlined",color:"primary",disabled:s,onClick:this.handleSubmit},"Create Account"))))}}]),t}(o.Component),Oe=Object(y.withStyles)(function(e){return{textField:{width:300},submitButton:{margin:e.spacing.unit,width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:3*e.spacing.unit,textAlign:"center"}}})(Object(G.a)(Object(v.b)(function(e){return{}},function(e){return{createAccount:function(t,a,n,r){return e(be.createAccount(t,a,n,r))}}})(we))),xe=a(40),Se=a(67),De=a.n(Se),Ae=a(177),je=a(20),Ie=a.n(je);var Te,ke,Ne,Re,Me=a(81),Fe=a.n(Me),Pe=a(91),_e=a.n(Pe),Le=a(83),Be=a.n(Le),Ue=a(236),Ge=a.n(Ue),qe=a(235),ze=a.n(qe),We=a(126),He=a.n(We),Ke=a(233),Ve=a.n(Ke),Ye=a(234),Qe=a.n(Ye),Je=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).toggle=function(e){e.stopPropagation();var t=a.props,n=t.folder,r=t.expandFolder,i=t.collapseFolder;n.isOpen?i(n.id):r(n.id)},a.select=function(){a.props.selectFolder(a.props.folder.id)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t,a,n=this.props,r=n.classes,i=n.folder,o=n.expandFolder,l=n.collapseFolder,s=n.selectFolder,u=i.children.length>0,d=(e=Fe.a,function(t,a){var n="function"===typeof t?function(e){return{root:t(e)}}:{root:t};return Object(y.withStyles)(n,a)(function(t){var a=t.classes,n=t.className,r=Object(Ae.a)(t,["classes","className"]);return c.a.createElement(e,Object.assign({className:Ie()(a.root,n)},r))})})(function(e){return{height:48,paddingTop:0,paddingBottom:0,paddingLeft:2*e.spacing.unit*i.depth}});u&&(t=i.isOpen?c.a.createElement(te.a,{className:r.iconButton,"aria-label":"Collapse",onClick:this.toggle},c.a.createElement(Ve.a,null)):c.a.createElement(te.a,{className:r.iconButton,"aria-label":"Expand",onClick:this.toggle},c.a.createElement(Qe.a,null))),i.isSelected&&(a=r.selected);var m="root"===i.folderType?"Diagrams":i.name;return c.a.createElement("div",null,c.a.createElement("div",{className:a},c.a.createElement(d,{button:!0,onClick:this.select},c.a.createElement(_e.a,null,i.isOpen?c.a.createElement(ze.a,null):c.a.createElement(Ge.a,null)),c.a.createElement(Be.a,{inset:!0,primary:m}),t)),c.a.createElement(He.a,{in:i.isOpen,timeout:"auto",unmountOnExit:!0},c.a.createElement(De.a,{component:"div",disablePadding:!0},i.children.sort(function(e,t){return e.name.localeCompare(t.name)}).map(function(e){return c.a.createElement(Xe,{key:e.id,folder:e,expandFolder:o,collapseFolder:l,selectFolder:s})}))))}}]),t}(o.Component),Xe=Object(y.withStyles)(function(e){return{iconButton:{margin:e.spacing.unit},listItemDefault:{height:48,paddingTop:0,paddingBottom:0},selected:{backgroundColor:e.palette.action.selected}}})(Object(v.b)(function(e){return{}},function(e){return{}})(Je)),Ze=Xe,$e=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.folderTree,n=e.expandFolder,r=e.collapseFolder,i=e.selectFolder;return c.a.createElement(De.a,{className:t.root,component:"nav"},a.map(function(e){return c.a.createElement(Ze,{key:e.id,folder:e,expandFolder:n,collapseFolder:r,selectFolder:i})}))}}]),t}(o.Component),et=Object(y.withStyles)(function(e){return{root:{height:"100%",width:"100%",backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing.unit}}})(Object(v.b)(function(e){return{}},function(e){return{}})($e)),tt=a(69),at=function(e){return e.diagram.diagrams},nt=Object(tt.createSelector)([at,function(e){return e.folder.currentFolderId}],function(e,t){return e.filter(function(e){return e.folderId===t})}),rt=Object(tt.createSelector)([at,function(e,t){return t.history.location.pathname}],function(e,t){var a=t.split("/");if(3===a.length&&"edit-diagram"===a[1]){var n=a[2];return e.find(function(e){return e.id===n})}return null}),it=a(128),ot=a.n(it),ct=a(237),lt=a.n(ct),st=a(238),ut=a.n(st),dt=a(64),mt=a.n(dt),pt=a(27),ht=a.n(pt),gt=a(127),ft=a.n(gt),bt=Object(I.createActions)({getDiagrams:null,getDiagramsSuccess:["diagrams"],getDiagramsFailure:null,saveDiagram:["diagram"],saveDiagramSuccess:["diagram"],saveDiagramFailure:null,createDiagram:["diagram"],createDiagramSuccess:["diagram"],createDiagramFailure:null,createDiagramDialogShow:null,setCreateDiagramName:["name"],setCreateDiagramType:["typ"],createDiagramDialogCancel:null,renameDiagramDialogShow:["diagram"],renameDiagramDialogCancel:null,renameDiagramNameChanged:["name"],importDiagramDialogShow:null,importDiagramDialogCancel:null,dropImportFile:["file","currentFolderId"],dropImportFileSuccess:["fileResult"],dropImportFileFailure:["fileResult"],removeImportFile:["index"],importDiagrams:["diagrams"],importDiagramsSuccess:["diagrams"],importDiagramsFailure:null,deleteDiagram:["diagramId"],deleteDiagramSuccess:null,deleteDiagramFailure:null,moveToFolderDialogShow:null,moveToFolderDialogCancel:null,saveManyDiagrams:["diagrams"],saveManyDiagramsSuccess:["diagrams"],saveManyDiagramsFailure:null,setDocumentsPageMode:["mode"]}),Et=bt.Types,vt=bt.Creators,yt=Object(I.createReducer)({diagrams:[],showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er",showRenameDiagramDialog:!1,showImportDiagramDialog:!1,showMoveToFolderDialog:!1,renameDiagramName:null,renameDiagramId:null,dropImportFileResults:[],documentsPageMode:"list"},(Te={},Object(j.a)(Te,Et.GET_DIAGRAMS,function(e){return e}),Object(j.a)(Te,Et.GET_DIAGRAMS_SUCCESS,function(e,t){return Object(g.a)({},e,{diagrams:t.diagrams})}),Object(j.a)(Te,Et.GET_DIAGRAMS_FAILURE,function(e){return e}),Object(j.a)(Te,Et.SAVE_DIAGRAM,function(e){return e}),Object(j.a)(Te,Et.SAVE_DIAGRAM_SUCCESS,function(e,t){var a=e.diagrams.filter(function(e){return e.id!==t.diagram.id});return Object(g.a)({},e,{diagrams:Object(xe.a)(a).concat([t.diagram])})}),Object(j.a)(Te,Et.SAVE_DIAGRAM_FAILURE,function(e){return e}),Object(j.a)(Te,Et.CREATE_DIAGRAM,function(e){return e}),Object(j.a)(Te,Et.CREATE_DIAGRAM_SUCCESS,function(e,t){var a=e.diagrams;return Object(g.a)({},e,{diagrams:Object(xe.a)(a).concat([t.diagram]),showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er"})}),Object(j.a)(Te,Et.CREATE_DIAGRAM_DIALOG_SHOW,function(e){return Object(g.a)({},e,{showCreateDiagramDialog:!0})}),Object(j.a)(Te,Et.CREATE_DIAGRAM_DIALOG_CANCEL,function(e){return Object(g.a)({},e,{showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er"})}),Object(j.a)(Te,Et.SET_CREATE_DIAGRAM_NAME,function(e,t){return Object(g.a)({},e,{createDiagramName:t.name})}),Object(j.a)(Te,Et.SET_CREATE_DIAGRAM_TYPE,function(e,t){return Object(g.a)({},e,{createDiagramType:t.typ})}),Object(j.a)(Te,Et.RENAME_DIAGRAM_DIALOG_SHOW,function(e,t){return Object(g.a)({},e,{showRenameDiagramDialog:!0,renameDiagramName:t.diagram.name,renameDiagramId:t.diagram.id})}),Object(j.a)(Te,Et.RENAME_DIAGRAM_DIALOG_CANCEL,function(e){return Object(g.a)({},e,{showRenameDiagramDialog:!1,renameDiagramName:"",renameDiagramId:null})}),Object(j.a)(Te,Et.IMPORT_DIAGRAM_DIALOG_SHOW,function(e){return Object(g.a)({},e,{showImportDiagramDialog:!0,dropImportFileResults:[]})}),Object(j.a)(Te,Et.IMPORT_DIAGRAM_DIALOG_CANCEL,function(e){return Object(g.a)({},e,{showImportDiagramDialog:!1})}),Object(j.a)(Te,Et.DROP_IMPORT_FILE,function(e){return e}),Object(j.a)(Te,Et.DROP_IMPORT_FILE_SUCCESS,function(e,t){var a=e.dropImportFileResults;return Object(g.a)({},e,{dropImportFileResults:Object(xe.a)(a).concat([t.fileResult])})}),Object(j.a)(Te,Et.DROP_IMPORT_FILE_FAILURE,function(e,t){var a=e.dropImportFileResults;return Object(g.a)({},e,{dropImportFileResults:Object(xe.a)(a).concat([t.fileResult])})}),Object(j.a)(Te,Et.REMOVE_IMPORT_FILE,function(e,t){var a=Object(xe.a)(e.dropImportFileResults);return a.splice(t.index,1),Object(g.a)({},e,{dropImportFileResults:a})}),Object(j.a)(Te,Et.RENAME_DIAGRAM_NAME_CHANGED,function(e,t){return Object(g.a)({},e,{renameDiagramName:t.name})}),Object(j.a)(Te,Et.IMPORT_DIAGRAMS,function(e){return e}),Object(j.a)(Te,Et.IMPORT_DIAGRAMS_SUCCESS,function(e,t){var a=e.diagrams;return Object(g.a)({},e,{diagrams:Object(xe.a)(a).concat(Object(xe.a)(t.diagrams)),dropImportFileResults:[],showImportDiagramDialog:!1})}),Object(j.a)(Te,Et.IMPORT_DIAGRAMS_FAILURE,function(e){return Object(g.a)({},e,{showImportDiagramDialog:!1})}),Object(j.a)(Te,Et.DELETE_DIAGRAM,function(e){return e}),Object(j.a)(Te,Et.DELETE_DIAGRAM_SUCCESS,function(e){return e}),Object(j.a)(Te,Et.DELETE_DIAGRAM_FAILURE,function(e){return e}),Object(j.a)(Te,Et.MOVE_TO_FOLDER_DIALOG_SHOW,function(e){return Object(g.a)({},e,{showMoveToFolderDialog:!0})}),Object(j.a)(Te,Et.MOVE_TO_FOLDER_DIALOG_CANCEL,function(e){return Object(g.a)({},e,{showMoveToFolderDialog:!1})}),Object(j.a)(Te,Et.SAVE_MANY_DIAGRAMS,function(e){return e}),Object(j.a)(Te,Et.SAVE_MANY_DIAGRAMS_SUCCESS,function(e,t){var a=t.diagrams.map(function(e){return e.id}),n=e.diagrams.filter(function(e){return-1===a.indexOf(e.id)});return Object(g.a)({},e,{documentsPageMode:"list",diagrams:Object(xe.a)(n).concat(Object(xe.a)(t.diagrams))})}),Object(j.a)(Te,Et.SAVE_MANY_DIAGRAMS_FAILURE,function(e){return Object(g.a)({},e,{documentsPageMode:"list"})}),Object(j.a)(Te,Et.SET_DOCUMENTS_PAGE_MODE,function(e,t){return Object(g.a)({},e,{documentsPageMode:t.mode})}),Te)),Ct=Et,wt=vt,Ot=Object(I.createActions)({showConvertToRelationalDialog:["diagramId","name"],hideConvertToRelationalDialog:null,convertToRelational:["folderId","name","content","edit","history"],nameChanged:["name"],generateSql:["content"],generateSqlSuccess:["sql"],generateSqlFailure:null,hideConvertSqlDialog:null,setSqlCopied:null}),xt=Ot.Types,St=Ot.Creators,Dt=Object(I.createReducer)({showDialog:!1,diagramId:0,name:"",sql:"",showConvertSqlDialog:!1,sqlCopied:!1},(ke={},Object(j.a)(ke,xt.SHOW_CONVERT_TO_RELATIONAL_DIALOG,function(e,t){return Object(g.a)({},e,{showDialog:!0,diagramId:t.diagramId,name:t.name})}),Object(j.a)(ke,xt.HIDE_CONVERT_TO_RELATIONAL_DIALOG,function(e){return Object(g.a)({},e,{showDialog:!1})}),Object(j.a)(ke,xt.CONVERT_TO_RELATIONAL,function(e){return e}),Object(j.a)(ke,xt.NAME_CHANGED,function(e,t){return Object(g.a)({},e,{name:t.name})}),Object(j.a)(ke,xt.GENERATE_SQL,function(e){return e}),Object(j.a)(ke,xt.GENERATE_SQL_SUCCESS,function(e,t){return Object(g.a)({},e,{showConvertSqlDialog:!0,sqlCopied:!1,sql:t.sql})}),Object(j.a)(ke,xt.GENERATE_SQL_FAILURE,function(e,t){return Object(g.a)({},e,{showConvertSqlDialog:!0,sql:"Error"})}),Object(j.a)(ke,xt.HIDE_CONVERT_SQL_DIALOG,function(e,t){return Object(g.a)({},e,{showConvertSqlDialog:!1,sql:""})}),Object(j.a)(ke,xt.SET_SQL_COPIED,function(e){return Object(g.a)({},e,{sqlCopied:!0})}),ke)),At=xt,jt=St,It=a(51),Tt=a.n(It),kt=function(e){return e.folder.folders},Nt=Object(tt.createSelector)([kt,function(e){return e.folder.foldersMeta},function(e){return e.folder.currentFolderId}],function(e,t,a){if(0===e.length)return[];var n=e.map(function(e){var n=t.find(function(t){return t.id===e.id});return Object(g.a)({},n,e,{isSelected:e.id===a})}),r=n.find(function(e){return"root"===e.folderType}),i=n.find(function(e){return"trash"===e.folderType});r.depth=0,i.depth=0,i.children=[];return function e(t){var a=n.filter(function(e){return e.parentId===t.id});a.forEach(function(a){a.depth=t.depth+1,e(a)}),t.children=a}(r),[r,i]}),Rt=(Object(tt.createSelector)([kt],function(e){if(0===e.length)return[];var t=e.map(function(e){return Object(g.a)({},e,{isOpen:!1,isSelected:!1})}),a=t.find(function(e){return"root"===e.folderType});a.isOpen=!0,a.depth=0;return function e(a){var n=t.filter(function(e){return e.parentId===a.id});n.forEach(function(t){t.depth=a.depth+1,e(t)}),a.children=n}(a),[a]}),Object(tt.createSelector)([kt],function(e){if(e.length>0){var t=e.find(function(e){return"trash"===e.folderType});if(t)return t.id}return null})),Mt=window.saveAs,Ft={Erd:"er",Relational:"relational",Star:"star"},Pt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={menuAnchor:null,diagramId:null,diagramType:null,isMoving:!1,selectedIds:[]},a.handleClick=function(e){var t=a.props,n=t.mode,r=t.onSelectDiagram,i=t.history,o=t.currentFolderId,c=t.trashFolderId;"select"===n?r(e):o!==c&&i.push("/edit-diagram/".concat(e))},a.handleMenuClick=function(e,t,n){a.setState({menuAnchor:e,diagramId:t,diagramType:n})},a.handleMenuClose=function(){a.setState({menuAnchor:null,diagramId:null,diagramType:null})},a.handleOpen=function(){a.handleClick(a.state.diagramId),a.handleMenuClose()},a.handleRename=function(){var e=a.props.currentFolderDiagrams.find(function(e){return e.id===a.state.diagramId});a.handleMenuClose(),a.props.renameDiagramDialogShow(e)},a.handleTrash=function(){var e=a.props.currentFolderDiagrams.find(function(e){return e.id===a.state.diagramId});a.props.saveDiagram(Object(g.a)({},e,{folderId:a.props.trashFolderId})),a.handleMenuClose()},a.handleCopy=function(){var e=a.props.currentFolderDiagrams.find(function(e){return e.id===a.state.diagramId}),t={folderId:e.folderId,name:"".concat(e.name," Copy"),diagramType:e.diagramType,content:e.content};a.props.createDiagram(t),a.handleMenuClose()},a.handleExport=function(){var e=a.props.currentFolderDiagrams.find(function(e){return e.id===a.state.diagramId}),t=new Blob([e.content],{type:"text/plain;charset=utf-8"});Mt(t,"".concat(e.name,".erdplus")),a.handleMenuClose()},a.handleConvertToRelational=function(){var e=a.props.currentFolderDiagrams.find(function(e){return e.id===a.state.diagramId});a.handleMenuClose(),a.props.showConvertToRelationalDialog(e.id,e.name)},a.handleGenerateSql=function(){var e=a.props.currentFolderDiagrams.find(function(e){return e.id===a.state.diagramId});a.handleMenuClose(),a.props.generateSql(e.content)},a.typeToName=function(e){return e===Ft.Erd?"ER Diagram":e===Ft.Relational?"Relational Schema":e===Ft.Star?"Star Schema":""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.menuAnchor,n=t.diagramType,r=this.props,i=r.currentFolderDiagrams,o=r.classes,l=r.mode,s=r.selectedIds,u=r.currentFolderId,d=r.trashFolderId;i.sort(function(e,t){return e.name.localeCompare(t.name)});var m=u===d;return c.a.createElement(De.a,{className:o.root},c.a.createElement(mt.a,{id:"diagram-menu",open:Boolean(a),anchorEl:a,onClose:this.handleMenuClose},c.a.createElement(ht.a,{onClick:this.handleOpen},"Open ..."),c.a.createElement(ft.a,null),c.a.createElement(ht.a,{onClick:this.handleRename},"Rename ..."),c.a.createElement(ht.a,{onClick:this.handleTrash},"Move to Trash"),c.a.createElement(ht.a,{onClick:this.handleCopy},"Copy"),c.a.createElement(ht.a,{onClick:this.handleExport},"Export"),c.a.createElement(ht.a,{onClick:this.handleConvertToRelational,disabled:"er"!==n},"Convert to Relational Schema"),c.a.createElement(ht.a,{onClick:this.handleGenerateSql,disabled:"er"===n},"Generate SQL")),i.map(function(t,n){return c.a.createElement(Fe.a,{button:!m,key:t.id,onClick:function(){return e.handleClick(t.id)}},"select"===l&&c.a.createElement(Tt.a,{checked:s.includes(t.id),tabIndex:n}),c.a.createElement(_e.a,null,c.a.createElement(lt.a,null)),c.a.createElement(Be.a,{primary:t.name,secondary:e.typeToName(t.diagramType)}),c.a.createElement(Be.a,{secondary:window.moment(t.updatedAt).fromNow(),className:o.lastModified}),!m&&c.a.createElement(ot.a,null,c.a.createElement(te.a,{"aria-label":"diagram menu","aria-owns":a?"diagram-menu":null,"aria-haspopup":"true",onClick:function(a){return e.handleMenuClick(a.currentTarget,t.id,t.diagramType)}},c.a.createElement(ut.a,null))))}))}}]),t}(o.Component),_t=Object(y.withStyles)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},lastModified:{textAlign:"right",marginRight:30}}})(Object(G.a)(Object(v.b)(function(e){return{currentFolderId:e.folder.currentFolderId,currentFolderDiagrams:nt(e),trashFolderId:Rt(e)}},function(e){return{createDiagram:function(t){return e(wt.createDiagram(t))},deleteDiagram:function(t){return e(wt.deleteDiagram(t))},saveDiagram:function(t){return e(wt.saveDiagram(t))},renameDiagramDialogShow:function(t){return e(wt.renameDiagramDialogShow(t))},showConvertToRelationalDialog:function(t,a){return e(jt.showConvertToRelationalDialog(t,a))},generateSql:function(t){return e(jt.generateSql(t))}}})(Pt))),Lt=Object(I.createActions)({getFolders:null,getFoldersSuccess:["folders"],getFoldersFailure:null,expandFolder:["folderId"],collapseFolder:["folderId"],createFolderDialogShow:null,createFolderDialogCancel:null,newFolderNameChanged:["newFolderName"],createFolder:["name","parentId"],createFolderSuccess:["folder"],createFolderFailure:null,selectFolder:["folderId"],editFolderDialogShow:["folderId","name"],editFolderDialogCancel:null,editFolderNameChanged:["name"],renameFolder:["folder"],renameFolderSuccess:["folder"],renameFolderFailure:null}),Bt=Lt.Types,Ut=Lt.Creators,Gt=Object(I.createReducer)({folders:[],foldersMeta:[],currentFolderId:null,showNewFolder:!1,newFolderName:"",showEditFolder:!1,editFolderNewName:"",editFolderId:null},(Ne={},Object(j.a)(Ne,Bt.GET_FOLDERS,function(e){return e}),Object(j.a)(Ne,Bt.GET_FOLDERS_SUCCESS,function(e,t){var a=t.folders.map(function(e){return{id:e.id,isOpen:"root"===e.folderType}}),n=t.folders.find(function(e){return"root"===e.folderType});return Object(g.a)({},e,{folders:t.folders,foldersMeta:a,currentFolderId:n?n.id:null})}),Object(j.a)(Ne,Bt.GET_FOLDERS_FAILURE,function(e){return Object(g.a)({},e,{folders:[],foldersMeta:[]})}),Object(j.a)(Ne,Bt.EXPAND_FOLDER,function(e,t){var a=e.foldersMeta.map(function(e){return e.id===t.folderId?Object(g.a)({},e,{isOpen:!0}):e});return Object(g.a)({},e,{foldersMeta:a})}),Object(j.a)(Ne,Bt.COLLAPSE_FOLDER,function(e,t){var a=e.foldersMeta.map(function(e){return e.id===t.folderId?Object(g.a)({},e,{isOpen:!1}):e});return Object(g.a)({},e,{foldersMeta:a})}),Object(j.a)(Ne,Bt.CREATE_FOLDER_DIALOG_SHOW,function(e){return Object(g.a)({},e,{showNewFolder:!0,newFolderName:""})}),Object(j.a)(Ne,Bt.CREATE_FOLDER_DIALOG_CANCEL,function(e){return Object(g.a)({},e,{showNewFolder:!1})}),Object(j.a)(Ne,Bt.NEW_FOLDER_NAME_CHANGED,function(e,t){return Object(g.a)({},e,{newFolderName:t.newFolderName})}),Object(j.a)(Ne,Bt.CREATE_FOLDER,function(e){return e}),Object(j.a)(Ne,Bt.CREATE_FOLDER_SUCCESS,function(e,t){var a=Object(xe.a)(e.foldersMeta).concat([{id:t.folder.id,isOpen:!1}]),n=Object(xe.a)(e.folders).concat([t.folder]);return Object(g.a)({},e,{showNewFolder:!1,folders:n,foldersMeta:a})}),Object(j.a)(Ne,Bt.CREATE_FOLDER_FAILURE,function(e){return Object(g.a)({},e,{showNewFolder:!1})}),Object(j.a)(Ne,Bt.SELECT_FOLDER,function(e,t){return Object(g.a)({},e,{currentFolderId:t.folderId})}),Object(j.a)(Ne,Bt.EDIT_FOLDER_DIALOG_SHOW,function(e,t){var a=e.folders.find(function(e){return e.id===t.folderId});return Object(g.a)({},e,{showEditFolder:!0,editFolderNewName:a.name,editFolderId:t.folderId})}),Object(j.a)(Ne,Bt.EDIT_FOLDER_DIALOG_CANCEL,function(e){return Object(g.a)({},e,{showEditFolder:!1})}),Object(j.a)(Ne,Bt.EDIT_FOLDER_NAME_CHANGED,function(e,t){return Object(g.a)({},e,{editFolderNewName:t.name})}),Object(j.a)(Ne,Bt.RENAME_FOLDER,function(e){return e}),Object(j.a)(Ne,Bt.RENAME_FOLDER_SUCCESS,function(e,t){var a=e.folders.filter(function(e){return e.id!==t.folder.id}),n=Object(xe.a)(a).concat([t.folder]);return Object(g.a)({},e,{showEditFolder:!1,folders:n})}),Object(j.a)(Ne,Bt.RENAME_FOLDER_FAILURE,function(e,t){return Object(g.a)({},e,{showEditFolder:!1})}),Ne)),qt=Bt,zt=Ut,Wt=Object(I.createActions)({setContext:["contextDetails","contextType"],clearContext:null,setMouseMode:["mouseMode"],setUndoRedo:["canUndo","canRedo"],setCanDelete:["canDelete"],setCanvasSize:["width","height"],showCanvasSizeDialog:["minCanvasWidth","minCanvasHeight"],hideCanvasSizeDialog:null,showExportImageDialog:["diagramContent"],hideExportImageDialog:null,createExportImageData:["diagramContent","transparent","scale"],createExportImageDataSuccess:["dataUrl","blob"],updateExportImageOptions:["transparent","scale"],setIsDirty:["isDirty"],saveEditDiagram:["diagram"]}),Ht=Wt.Types,Kt=Wt.Creators,Vt=Object(I.createReducer)({contextDetails:{},contextType:"",mouseMode:"none",canUndo:!1,canRedo:!1,canDelete:!1,canvasWidth:2e3,canvasHeight:1e3,showCanvasSizeDialog:!1,minCanvasWidth:0,minCanvasHeight:0,showExportImageDialog:!1,exportImageContent:"",exportImageTransparent:!1,exportImageScale:1,exportImageDataUrl:"",exportImageBlob:null,isDirty:!1},(Re={},Object(j.a)(Re,Ht.SET_CONTEXT,function(e,t){return Object(g.a)({},e,{contextDetails:t.contextDetails,contextType:t.contextType})}),Object(j.a)(Re,Ht.CLEAR_CONTEXT,function(e){return Object(g.a)({},e,{contextDetails:{},contextType:""})}),Object(j.a)(Re,Ht.SET_MOUSE_MODE,function(e,t){return Object(g.a)({},e,{mouseMode:t.mouseMode})}),Object(j.a)(Re,Ht.SET_UNDO_REDO,function(e,t){return Object(g.a)({},e,{canUndo:t.canUndo,canRedo:t.canRedo})}),Object(j.a)(Re,Ht.SET_CAN_DELETE,function(e,t){return Object(g.a)({},e,{canDelete:t.canDelete})}),Object(j.a)(Re,Ht.SET_CANVAS_SIZE,function(e,t){return Object(g.a)({},e,{canvasWidth:t.width,canvasHeight:t.height,showCanvasSizeDialog:!1})}),Object(j.a)(Re,Ht.SHOW_CANVAS_SIZE_DIALOG,function(e,t){return Object(g.a)({},e,{showCanvasSizeDialog:!0,minCanvasWidth:t.minCanvasWidth,minCanvasHeight:t.minCanvasHeight})}),Object(j.a)(Re,Ht.HIDE_CANVAS_SIZE_DIALOG,function(e){return Object(g.a)({},e,{showCanvasSizeDialog:!1})}),Object(j.a)(Re,Ht.SHOW_EXPORT_IMAGE_DIALOG,function(e,t){return Object(g.a)({},e,{showExportImageDialog:!0,exportImageContent:t.diagramContent})}),Object(j.a)(Re,Ht.HIDE_EXPORT_IMAGE_DIALOG,function(e){return Object(g.a)({},e,{showExportImageDialog:!1,exportImageDataUrl:"",exportImageBlob:null})}),Object(j.a)(Re,Ht.CREATE_EXPORT_IMAGE_DATA,function(e){return e}),Object(j.a)(Re,Ht.CREATE_EXPORT_IMAGE_DATA_SUCCESS,function(e,t){return Object(g.a)({},e,{exportImageDataUrl:t.dataUrl,exportImageBlob:t.blob})}),Object(j.a)(Re,Ht.UPDATE_EXPORT_IMAGE_OPTIONS,function(e,t){return Object(g.a)({},e,{exportImageTransparent:t.transparent,exportImageScale:t.scale})}),Object(j.a)(Re,Ht.SET_IS_DIRTY,function(e,t){return Object(g.a)({},e,{isDirty:t.isDirty})}),Object(j.a)(Re,Ht.SAVE_EDIT_DIAGRAM,function(e){return e}),Re)),Yt=Ht,Qt=Kt,Jt=a(35),Xt=a.n(Jt),Zt=a(43),$t=a.n(Zt),ea=a(42),ta=a.n(ea),aa=a(53),na=a.n(aa),ra=a(46),ia=a.n(ra),oa=a(44),ca=a.n(oa),la=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(){a.props.createFolderDialogCancel()},a.handleSubmit=function(){a.props.createFolder(a.props.newFolderName,a.props.currentFolderId)},a.newFolderNameChanged=function(e){a.props.newFolderNameChanged(e.target.value)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showNewFolder,a=e.newFolderName,n=e.classes;return c.a.createElement(Xt.a,{open:t,"aria-labelledby":"new-folder-dialog",onEscapeKeyDown:this.handleCancel,className:n.dialog},c.a.createElement(ia.a,{id:"new-folder-dialog"},"Create New Folder"),c.a.createElement(ta.a,null,c.a.createElement(na.a,null,"Create a new folder."),c.a.createElement(ce.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:a,onChange:this.newFolderNameChanged,className:n.input})),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleSubmit,color:"primary"},"Create")))}}]),t}(o.Component),sa=Object(y.withStyles)(function(e){return{dialog:{},input:{width:300}}})(Object(v.b)(function(e){return{showNewFolder:e.folder.showNewFolder,newFolderName:e.folder.newFolderName,currentFolderId:e.folder.currentFolderId}},function(e){return{createFolderDialogCancel:function(){return e(zt.createFolderDialogCancel())},createFolder:function(t,a){return e(zt.createFolder(t,a))},newFolderNameChanged:function(t){return e(zt.newFolderNameChanged(t))}}})(ca()()(la))),ua=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(){a.props.editFolderDialogCancel()},a.handleSubmit=function(){var e=Object(g.a)({},a.props.editFolder,{name:a.props.editFolderNewName});a.props.renameFolder(e)},a.editFolderNameChanged=function(e){a.props.editFolderNameChanged(e.target.value)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showEditFolder,a=e.editFolderNewName,n=e.classes;return c.a.createElement(Xt.a,{open:t,"aria-labelledby":"edit-folder-dialog",onEscapeKeyDown:this.handleCancel,className:n.dialog},c.a.createElement(ia.a,{id:"edit-folder-dialog"},"Rename Folder"),c.a.createElement(ta.a,null,c.a.createElement(ce.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:a,onChange:this.editFolderNameChanged,className:n.input})),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleSubmit,color:"primary"},"Rename")))}}]),t}(o.Component),da=Object(y.withStyles)(function(e){return{dialog:{},input:{width:300}}})(Object(v.b)(function(e){return{editFolder:e.folder.folders.find(function(t){return t.id===e.folder.editFolderId}),showEditFolder:e.folder.showEditFolder,editFolderNewName:e.folder.editFolderNewName,editFolderId:e.folder.editFolderId}},function(e){return{editFolderDialogCancel:function(){return e(zt.editFolderDialogCancel())},renameFolder:function(t){return e(zt.renameFolder(t))},editFolderNameChanged:function(t){return e(zt.editFolderNameChanged(t))}}})(ca()()(ua))),ma=a(39),pa=a.n(ma),ha=a(63),ga=a.n(ha),fa=a(25),ba=a.n(fa),Ea=a(34),va=a.n(Ea),ya=a(36),Ca=a.n(ya),wa="er",Oa="relational",xa="star",Sa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(){a.props.createDiagramDialogCancel()},a.handleSubmit=function(){var e=a.props,t={folderId:e.currentFolderId,name:e.createDiagramName,diagramType:e.createDiagramType,content:JSON.stringify({version:2,www:"erdplus.com",shapes:[],connectors:[],width:2e3,height:1e3})};a.props.createDiagram(t)},a.handleNameChanged=function(e){a.props.setCreateDiagramName(e.target.value)},a.handleTypeChange=function(e){console.log(e.target.value),a.props.setCreateDiagramType(e.target.value)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.createDiagramName,a=e.createDiagramType,n=e.showCreateDiagramDialog,r=e.classes;return c.a.createElement(Xt.a,{open:n,"aria-labelledby":"new-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:r.dialog},c.a.createElement(ia.a,{id:"new-diagram-dialog"},"Create New Diagram"),c.a.createElement(ta.a,null,c.a.createElement(na.a,null,"Create a new diagram."),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:t,onChange:this.handleNameChanged,className:r.input})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset"},c.a.createElement(Ca.a,null,"Type"),c.a.createElement(ga.a,{value:a,onChange:this.handleTypeChange},c.a.createElement(ba.a,{value:wa,control:c.a.createElement(pa.a,null),label:"ER Diagram"}),c.a.createElement(ba.a,{value:Oa,control:c.a.createElement(pa.a,null),label:"Relational Schema"}),c.a.createElement(ba.a,{value:xa,control:c.a.createElement(pa.a,null),label:"Star Schema"})))))),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleSubmit,color:"primary"},"Create")))}}]),t}(o.Component),Da=Object(y.withStyles)(function(e){return{dialog:{},input:{width:500}}})(Object(v.b)(function(e){return{createDiagramName:e.diagram.createDiagramName,createDiagramType:e.diagram.createDiagramType,showCreateDiagramDialog:e.diagram.showCreateDiagramDialog,currentFolderId:e.folder.currentFolderId}},function(e){return{createDiagramDialogCancel:function(){return e(wt.createDiagramDialogCancel())},createDiagram:function(t){return e(wt.createDiagram(t))},setCreateDiagramName:function(t){return e(wt.setCreateDiagramName(t))},setCreateDiagramType:function(t){return e(wt.setCreateDiagramType(t))}}})(ca()()(Sa))),Aa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(){a.props.renameDiagramDialogCancel()},a.handleSubmit=function(){var e=a.props,t=e.diagram,n=e.renameDiagramName,r=e.renameDiagramDialogCancel,i=e.saveDiagram,o=Object(g.a)({},t,{name:n});r(),i(o)},a.handleNameChanged=function(e){var t=e.target.value;a.props.renameDiagramNameChanged(t)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showRenameDiagramDialog,a=e.renameDiagramName,n=e.classes;return c.a.createElement(Xt.a,{open:t,"aria-labelledby":"rename-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:n.dialog},c.a.createElement(ia.a,{id:"rename-diagram-dialog"},"Rename New Diagram"),c.a.createElement(ta.a,null,c.a.createElement(na.a,null,"Rename a new diagram."),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,inputProps:{ref:function(e){}},value:a,onChange:this.handleNameChanged,className:n.input})))),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleSubmit,color:"primary"},"Rename")))}}]),t}(o.Component),ja=Object(y.withStyles)(function(e){return{dialog:{},input:{width:500}}})(Object(v.b)(function(e){var t=e.diagram.renameDiagramId,a=e.diagram.diagrams.find(function(e){return e.id===t});return{showRenameDiagramDialog:e.diagram.showRenameDiagramDialog,renameDiagramName:e.diagram.renameDiagramName,renameDiagramId:t,diagram:a}},function(e){return{renameDiagramDialogCancel:function(){return e(wt.renameDiagramDialogCancel())},renameDiagramNameChanged:function(t){return e(wt.renameDiagramNameChanged(t))},saveDiagram:function(t){return e(wt.saveDiagram(t))}}})(ca()()(Aa))),Ia=a(253),Ta=a(240),ka=a.n(Ta),Na=a(241),Ra=a.n(Na),Ma=a(242),Fa=a.n(Ma),Pa=a(129),_a=a.n(Pa),La=a(104),Ba=a.n(La),Ua=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(){a.props.importDiagramDialogCancel()},a.handleSubmit=function(){var e=a.props,t=e.dropImportFileResults;(0,e.importDiagrams)(t.filter(function(e){return e.ok}).map(function(e){return e.diagram}))},a.handleOnDrop=function(e){var t=a.props,n=t.dropImportFile,r=t.currentFolderId;e.forEach(function(e){n(e,r)})},a.handleDeleteChip=function(e){a.props.removeImportFile(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.showImportDiagramDialog,n=t.dropImportFileResults,r=t.standalone,i=t.classes,o=n.length>0,l=r?"Import New Diagram":"Import New Diagrams",s=r?"Drag and drop file here or click to browse for a file":"Drag and drop multiple files here or click to browse for a file";return c.a.createElement(Xt.a,{open:a,"aria-labelledby":"import-diagram-dialog",onEscapeKeyDown:this.handleCancel},c.a.createElement(ia.a,{id:"import-diagram-dialog"},l),c.a.createElement(ta.a,null,c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ia.a,{onDrop:this.handleOnDrop,className:i.dropzone,multiple:!r},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{align:"center",variant:"body2"},s)),c.a.createElement(ie.a,{item:!0,xs:12,align:"center"},c.a.createElement(ka.a,null)),c.a.createElement(ie.a,{item:!0,xs:12,align:"center"},n.map(function(t,a){var n=t.ok?c.a.createElement(Ba.a,null,c.a.createElement(Ra.a,null)):c.a.createElement(Ba.a,null,c.a.createElement(Fa.a,null));return c.a.createElement(_a.a,{key:a,label:t.name,className:i.chip,onDelete:function(){return e.handleDeleteChip(a)},avatar:n})}))))))),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleSubmit,color:"primary",disabled:!o},"Import")))}}]),t}(o.Component),Ga=Object(y.withStyles)(function(e){return{dropzone:{height:250,width:500,borderWidth:2,borderColor:"#999999",borderStyle:"dashed",borderRadius:5},list:{maxHeight:200,overflowY:"auto"},chip:{margin:5}}})(Object(v.b)(function(e){return{showImportDiagramDialog:e.diagram.showImportDiagramDialog,dropImportFileResults:e.diagram.dropImportFileResults,currentFolderId:e.folder.currentFolderId}},function(e){return{importDiagramDialogCancel:function(){return e(wt.importDiagramDialogCancel())},dropImportFile:function(t,a){return e(wt.dropImportFile(t,a))},removeImportFile:function(t){return e(wt.removeImportFile(t))}}})(ca()()(Ua))),qa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(){a.props.hideConvertToRelationalDialog()},a.handleCreate=function(){var e=a.props,t=e.diagram,n=e.name,r=e.convertToRelational,i=e.history;r(t.folderId,n,t.content,!1,i)},a.handleEdit=function(){var e=a.props,t=e.diagram,n=e.name,r=e.convertToRelational,i=e.history;r(t.folderId,n,t.content,!0,i)},a.handleNameChanged=function(e){var t=e.target.value;a.props.nameChanged(t)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showDialog,a=e.name,n=e.classes;return c.a.createElement(Xt.a,{open:t,"aria-labelledby":"convert-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:n.dialog},c.a.createElement(ia.a,{id:"convert-diagram-dialog"},"Convert to Relational Schema"),c.a.createElement(ta.a,null,c.a.createElement(na.a,null,"The relational diagram will be created in the same folder as this ER diagram."),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,inputProps:{ref:function(e){e&&setTimeout(function(){e.focus(),e.select()},0)}},value:a,onChange:this.handleNameChanged,className:n.input})))),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleCreate,color:"primary"},"Create"),c.a.createElement(w.a,{onClick:this.handleEdit,color:"primary"},"Create & Edit")))}}]),t}(Xt.a),za=Object(y.withStyles)(function(e){return{dialog:{},input:{width:500}}})(Object(G.a)(Object(v.b)(function(e){var t=e.convert.diagramId;return{diagram:e.diagram.diagrams.find(function(e){return e.id===t}),showDialog:e.convert.showDialog,name:e.convert.name}},function(e){return{hideConvertToRelationalDialog:function(){return e(jt.hideConvertToRelationalDialog())},nameChanged:function(t){return e(jt.nameChanged(t))},convertToRelational:function(t,a,n,r,i){return e(jt.convertToRelational(t,a,n,r,i))}}})(ca()()(qa)))),Wa=a(243),Ha=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(){a.props.hideConvertSqlDialog()},a.handleCopy=function(){a.props.setSqlCopied()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showConvertSqlDialog,a=e.sql,n=e.sqlCopied,r=e.classes,i=n?"Generate SQL - Copied":"Generate SQL";return c.a.createElement(Xt.a,{open:t,"aria-labelledby":"convert-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:r.dialog},c.a.createElement(ia.a,{id:"convert-diagram-dialog"},i),c.a.createElement(ta.a,null,c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("pre",{align:"left",variant:"body2"},a)))),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Close (ESC)"),c.a.createElement(Wa.CopyToClipboard,{text:a,onCopy:this.handleCopy},c.a.createElement(w.a,{color:"primary"},"Copy"))))}}]),t}(Xt.a),Ka=Object(y.withStyles)(function(e){return{dialog:{},sql:{width:500,height:300}}})(Object(v.b)(function(e){var t=e.convert.diagramId;return{diagram:e.diagram.diagrams.find(function(e){return e.id===t}),sql:e.convert.sql,showConvertSqlDialog:e.convert.showConvertSqlDialog,sqlCopied:e.convert.sqlCopied}},function(e){return{hideConvertSqlDialog:function(){return e(jt.hideConvertSqlDialog())},setSqlCopied:function(){return e(jt.setSqlCopied())}}})(ca()()(Ha))),Va=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={foldersMeta:[],currendFolderId:0},a.handleSubmit=function(){a.props.onSubmit(a.state.currendFolderId),a.props.moveToFolderDialogCancel()},a.handleCancel=function(){a.props.moveToFolderDialogCancel()},a.expandFolder=function(e){var t=a.state.foldersMeta.map(function(t){return t.id===e?Object(g.a)({},t,{isOpen:!0}):t});a.setState({foldersMeta:t})},a.collapseFolder=function(e){var t=a.state.foldersMeta.map(function(t){return t.id===e?Object(g.a)({},t,{isOpen:!1}):t});a.setState({foldersMeta:t})},a.selectFolder=function(e){a.setState({currendFolderId:e})},a.makeFolderTree=function(e,t,a){if(0===e.length)return[];var n=e.map(function(e){var n=t.find(function(t){return t.id===e.id});return Object(g.a)({},n,e,{isSelected:e.id===a})}),r=n.find(function(e){return"root"===e.folderType}),i=n.find(function(e){return"trash"===e.folderType});r.depth=0,i.depth=0,i.children=[];return function e(t){var a=n.filter(function(e){return e.parentId===t.id});a.forEach(function(a){a.depth=t.depth+1,e(a)}),t.children=a}(r),[r,i]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){if(!1===e.showMoveToFolderDialog&&!0===this.props.showMoveToFolderDialog){var n=this.props.folders.map(function(e){return{id:e.id,isOpen:"root"===e.folderType}});this.setState({foldersMeta:n,currendFolderId:0})}}},{key:"render",value:function(){var e=this.state,t=e.foldersMeta,a=e.currendFolderId,n=this.props,r=n.classes,i=n.folders,o=n.showMoveToFolderDialog,l=this.makeFolderTree(i,t,a);return c.a.createElement(Xt.a,{open:o,"aria-labelledby":"move-to-folder-dialog",onEscapeKeyDown:this.handleCancel},c.a.createElement(ta.a,null,c.a.createElement(na.a,null,"Select a folder"),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12,className:r.folderTree},c.a.createElement(et,{folderTree:l,expandFolder:this.expandFolder,collapseFolder:this.collapseFolder,selectFolder:this.selectFolder})))),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleSubmit,color:"primary",disabled:0===a},"Move")))}}]),t}(Xt.a),Ya=Object(y.withStyles)(function(e){return{dialog:{},folderTree:{width:420,height:280,overflowY:"scroll",overflowX:"hidden",border:"1px solid #efefef"}}})(Object(G.a)(Object(v.b)(function(e){return{folders:e.folder.folders,showMoveToFolderDialog:e.diagram.showMoveToFolderDialog}},function(e){return{moveToFolderDialogCancel:function(){return e(wt.moveToFolderDialogCancel())}}})(ca()()(Va)))),Qa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null,selectedIds:[]},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.handleNewFolderClick=function(){a.props.createFolderDialogShow()},a.handleRenameFolderClick=function(){a.props.editFolderDialogShow(a.props.currentFolderId)},a.handleNewDiagramClick=function(){a.props.createDiagramDialogShow()},a.handleImportDiagram=function(){a.props.importDiagramDialogShow()},a.handleOrganizeDiagram=function(){a.props.setDocumentsPageMode("select"),a.setState({selectedIds:[]})},a.handleMoveDone=function(){a.props.setDocumentsPageMode("list")},a.handleMoveTo=function(){a.props.moveToFolderDialogShow()},a.handleSelectDiagram=function(e){console.log("handleSelectDiagram",e);var t=Object(xe.a)(a.state.selectedIds),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),a.setState({selectedIds:t})},a.handleMoveToFolderSubmit=function(e){var t=a.state.selectedIds,n=a.props.diagrams.filter(function(e){return-1!==t.indexOf(e.id)}).map(function(t){return Object(g.a)({},t,{folderId:e})});a.props.saveManyDiagrams(n)},a.selectFolder=function(e){a.handleMoveDone(),a.props.selectFolder(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/documents")}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.folderTree,n=e.expandFolder,r=e.collapseFolder,i=e.documentsPageMode,o=e.currentFolderType,l=this.state.selectedIds,s="trash"!==o&&"root"!==o;return c.a.createElement("section",{className:t.section},c.a.createElement(ne,null),c.a.createElement("div",{className:t.contentArea},c.a.createElement(sa,null),c.a.createElement(da,null),c.a.createElement(Da,null),c.a.createElement(ja,null),c.a.createElement(Ga,{importDiagrams:this.props.importDiagrams,standalone:!1}),c.a.createElement(za,null),c.a.createElement(Ka,null),c.a.createElement(Ya,{onSubmit:this.handleMoveToFolderSubmit}),c.a.createElement("div",{className:t.folderButtonsArea},c.a.createElement(ie.a,{container:!0,spacing:8,className:t.grid},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("div",{className:t.buttonContainer},c.a.createElement(w.a,{variant:"outlined",className:t.button,onClick:this.handleNewFolderClick},"New Folder..."),c.a.createElement(w.a,{variant:"outlined",className:t.button,onClick:this.handleRenameFolderClick,disabled:!s},"Rename Folder..."))))),c.a.createElement("div",{className:t.folderArea},c.a.createElement(ie.a,{container:!0,spacing:8,className:t.grid},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(et,{folderTree:a,expandFolder:n,collapseFolder:r,selectFolder:this.selectFolder})))),c.a.createElement("div",{className:t.documentButtonsArea},c.a.createElement(ie.a,{container:!0,spacing:8,className:t.grid},c.a.createElement(ie.a,{item:!0,xs:12},"list"===i&&c.a.createElement("div",{className:t.buttonContainer},c.a.createElement(w.a,{variant:"outlined",className:t.button,onClick:this.handleNewDiagramClick},"New Diagram..."),c.a.createElement(w.a,{variant:"outlined",className:t.button,onClick:this.handleImportDiagram},"Import..."),c.a.createElement(w.a,{variant:"outlined",className:t.button,onClick:this.handleOrganizeDiagram},"Organize...")),"select"===i&&c.a.createElement("div",{className:t.buttonContainer},c.a.createElement(w.a,{variant:"outlined",className:t.button,onClick:this.handleMoveDone},"Back"),c.a.createElement(w.a,{variant:"outlined",className:t.button,onClick:this.handleMoveTo,disabled:0===l.length},"Move..."),c.a.createElement(ve.c,{className:t.helperText,variant:"body1"},"Select diagrams to move to another folder or to Trash."))))),c.a.createElement("div",{className:t.documentsArea},c.a.createElement(ie.a,{container:!0,spacing:8,className:t.grid},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(_t,{mode:i,selectedIds:l,onSelectDiagram:this.handleSelectDiagram}))))))}}]),t}(o.Component),Ja=Object(y.withStyles)(function(e){return{root:{flexGrow:1},grid:{},button:{marginRight:e.spacing.unit,width:170},buttonIcon:{marginRight:12},helperText:{display:"inline-flex"},buttonContainer:{},section:{height:"100%",display:"flex",flexFlow:"column",backgroundColor:"#eeeeee"},contentArea:{height:"100%"},folderButtonsArea:{position:"fixed",top:75,left:5,width:400,height:40},folderArea:{position:"fixed",top:120,left:5,width:400,bottom:5,backgroundColor:"white",overflowY:"auto",overflowX:"hidden",border:"1px solid #e0e0e0"},documentButtonsArea:{position:"fixed",top:75,left:410,right:5,height:40},documentsArea:{position:"fixed",top:120,left:410,right:5,bottom:5,backgroundColor:"white",overflowY:"audo",overflowX:"hidden",border:"1px solid #e0e0e0"}}})(Object(v.b)(function(e){var t=e.folder.folders.find(function(t){return t.id===e.folder.currentFolderId}),a=t?t.folderType:"";return{folderTree:Nt(e),diagrams:e.diagram.diagrams,documentsPageMode:e.diagram.documentsPageMode,currentFolderId:e.folder.currentFolderId,currentFolderType:a}},function(e){return{createFolderDialogShow:function(){return e(zt.createFolderDialogShow())},editFolderDialogShow:function(t){return e(zt.editFolderDialogShow(t))},expandFolder:function(t){return e(zt.expandFolder(t))},collapseFolder:function(t){return e(zt.collapseFolder(t))},selectFolder:function(t){return e(zt.selectFolder(t))},createDiagramDialogShow:function(){return e(wt.createDiagramDialogShow())},importDiagramDialogShow:function(){return e(wt.importDiagramDialogShow())},setCanvasSize:function(t,a){return e(Qt.setCanvasSize(t,a))},moveToFolderDialogShow:function(){return e(wt.moveToFolderDialogShow())},saveManyDiagrams:function(t){return e(wt.saveManyDiagrams(t))},setDocumentsPageMode:function(t){return e(wt.setDocumentsPageMode(t))},importDiagrams:function(t){return e(wt.importDiagrams(t))}}})(Qa)),Xa=a(138),Za=a.n(Xa),$a=a(139),en=a.n($a),tn=a(140),an=a.n(tn),nn=a(137),rn=a.n(nn),on=a(244),cn=a.n(on),ln=window.erd,sn={none:[],er:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Entity",mouseMode:"entity"},{name:"Attribute",mouseMode:"attribute"},{name:"Relationship",mouseMode:"relationship"},{name:"Label",mouseMode:"label"}],relational:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Table",mouseMode:"table"},{name:"Label",mouseMode:"label"}],star:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Fact",mouseMode:"fact"},{name:"Dimension",mouseMode:"dimension"},{name:"Label",mouseMode:"label"}]},un=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={menuAnchor:null},a.handleUndo=function(){var e=a.props.getStage();a.props.clearContext(),e.undoManager.undo()},a.handleRedo=function(){var e=a.props.getStage();a.props.clearContext(),e.undoManager.redo()},a.handleDelete=function(){var e=a.props.getStage();e.deleteSelection(),e.draw()},a.changeMode=function(e){var t=a.props.getStage(),n=a.props.setMouseMode;t.undoManager.hasCurrentAction()&&t.undoManager.endAction(),t.mouseMode=e,n(e)},a.handleMenuClick=function(e){a.setState({menuAnchor:e})},a.handleMenuClose=function(){a.setState({menuAnchor:null})},a.handleExportImage=function(){var e=a.props,t=e.showExportImageDialog,n=e.createExportImageData,r=e.exportImageTransparent,i=e.exportImageScale,o=a.props.getStage(),c=new ln.DiagramArchive(o).toJson();t(c),n(c,r,i),a.handleMenuClose()},a.handleResize=function(){var e=a.props.getStage().getBounds(!1);a.props.showCanvasSizeDialog(e.right,e.bottom),a.setState({menuAnchor:null})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.menuAnchor,a=this.props,n=a.classes,r=a.diagramType,i=a.mouseMode,o=a.canUndo,l=a.canRedo,s=a.canDelete,u=a.isDirty,d=sn[r];return c.a.createElement("div",{className:n.buttonBar},c.a.createElement(mt.a,{id:"diagram-menu",open:Boolean(t),anchorEl:t,onClose:this.handleMenuClose},c.a.createElement(ht.a,{onClick:this.handleExportImage},"Export Image ..."),c.a.createElement(ht.a,{onClick:this.handleRename},"Rename ..."),c.a.createElement(ht.a,{onClick:this.handleResize},"Canvas Size ...")),c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:function(t){return e.handleMenuClick(t.currentTarget)}},c.a.createElement(rn.a,null)," Menu"),c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:this.props.handleSave,disabled:!u},c.a.createElement(cn.a,null)," Save"),c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:this.handleUndo,disabled:!o},c.a.createElement(Za.a,null)," Undo"),c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:this.handleRedo,disabled:!l},c.a.createElement(en.a,null)," Redo"),c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:this.handleDelete,disabled:!s},c.a.createElement(an.a,null)," Delete"),d.map(function(t){return c.a.createElement(w.a,{key:t.mouseMode,variant:"outlined",className:n.button,color:t.mouseMode===i?"primary":"default",onClick:function(){return e.changeMode(t.mouseMode)}},t.name)}))}}]),t}(o.Component),dn=Object(y.withStyles)(function(e){return{button:{marginTop:e.spacing.unit,marginBottom:0,marginLeft:e.spacing.unit,marginRight:0},buttonBar:{background:"#eeeeee",paddingBottom:10,zIndex:1e3}}})(Object(G.a)(Object(v.b)(function(e,t){return{mouseMode:e.edit.mouseMode,editDiagram:rt(e,t),canUndo:e.edit.canUndo,canRedo:e.edit.canRedo,canDelete:e.edit.canDelete,exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale,isDirty:e.edit.isDirty}},function(e){return{clearContext:function(){return e(Qt.clearContext())},setMouseMode:function(t){return e(Qt.setMouseMode(t))},showCanvasSizeDialog:function(t,a){return e(Qt.showCanvasSizeDialog(t,a))},showExportImageDialog:function(t){return e(Qt.showExportImageDialog(t))},createExportImageData:function(t,a,n){return e(Qt.createExportImageData(t,a,n))}}})(un))),mn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={width:a.props.canvasWidth,height:a.props.canvasHeight},a.handleCancel=function(){a.props.hideCanvasSizeDialog()},a.handleSubmit=function(){var e=a.state,t=e.width,n=e.height;a.props.setCanvasSize(t,n)},a.handleWidthChange=function(e){a.setState({width:e.target.value})},a.handleHeightChange=function(e){a.setState({height:e.target.value})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showCanvasSizeDialog,a=e.classes,n=Math.max(this.props.minCanvasWidth,200),r=parseInt(this.state.width,10),i=!0,o=" ";isNaN(r)?i=!1:r<n?(i=!1,o="Must be at least ".concat(n)):r>12e3&&(i=!1,o="Must be less than ".concat(12e3));var l=Math.max(this.props.minCanvasHeight,200),s=parseInt(this.state.height,10),u=!0,d=" ";return isNaN(s)?u=!1:s<l?(u=!1,d="Must be at least ".concat(l)):s>12e3&&(u=!1,d="Must be less than ".concat(12e3)),c.a.createElement(Xt.a,{open:t,"aria-labelledby":"canvas-size-dialog",onEscapeKeyDown:this.handleCancel,className:a.dialog},c.a.createElement(ia.a,{id:"canvas-size-dialog"},"Canvas Size"),c.a.createElement(ta.a,null,c.a.createElement(na.a,null,"Canvas Size."),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(ce.a,{id:"width",label:"Width",margin:"normal",autoComplete:"off",helperText:o,error:!i,value:this.state.width,onChange:this.handleWidthChange})),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(ce.a,{id:"height",label:"Height",margin:"normal",autoComplete:"off",helperText:d,error:!u,value:this.state.height,onChange:this.handleHeightChange})))),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleSubmit,color:"primary",disabled:!(i&&u)},"Save")))}}]),t}(o.Component),pn=Object(y.withStyles)(function(e){return{dialog:{},input:{width:500}}})(Object(v.b)(function(e){return{canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight,minCanvasWidth:e.edit.minCanvasWidth,minCanvasHeight:e.edit.minCanvasHeight,showCanvasSizeDialog:e.edit.showCanvasSizeDialog}},function(e){return{createDiagramDialogCancel:function(){return e(wt.createDiagramDialogCancel())},createDiagram:function(t){return e(wt.createDiagram(t))},setCanvasSize:function(t,a){return e(Qt.setCanvasSize(t,a))},hideCanvasSizeDialog:function(){return e(Qt.hideCanvasSizeDialog())}}})(ca()()(mn))),hn=window.saveAs,gn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(){a.props.hideExportImageDialog()},a.handleSubmit=function(){var e=hn(a.props.exportImageBlob,"image.png");console.log("export image handleSubmit ",e),a.props.hideExportImageDialog()},a.handleChangeTransparent=function(){var e=a.props,t=e.updateExportImageOptions,n=e.createExportImageData,r=e.exportImageContent,i=e.exportImageTransparent,o=e.exportImageScale;t(!i,o),n(r,!i,o)},a.handleChangeScale=function(){var e=a.props,t=e.updateExportImageOptions,n=e.createExportImageData,r=e.exportImageContent,i=e.exportImageTransparent,o=1===e.exportImageScale?4:1;t(i,o),n(r,i,o)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showExportImageDialog,a=e.exportImageDataUrl,n=e.exportImageTransparent,r=e.exportImageScale,i=e.classes;return c.a.createElement(Xt.a,{open:t,"aria-labelledby":"canvas-size-dialog",onEscapeKeyDown:this.handleCancel,className:i.dialog},c.a.createElement(ia.a,{id:"canvas-size-dialog"},"Export Image"),c.a.createElement(ta.a,null,c.a.createElement(na.a,null,"Preview"),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("div",{className:i.imageContainer},c.a.createElement("img",{src:a,alt:"diagram",className:i.image}))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ba.a,{control:c.a.createElement(Tt.a,{checked:n,onChange:this.handleChangeTransparent}),label:"Transparent Background"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ba.a,{control:c.a.createElement(Tt.a,{checked:4===r,onChange:this.handleChangeScale}),label:"High Resolution (4x normal size)"})))),c.a.createElement($t.a,null,c.a.createElement(w.a,{onClick:this.handleCancel,color:"primary"},"Cancel (ESC)"),c.a.createElement(w.a,{onClick:this.handleSubmit,color:"primary"},"Save")))}}]),t}(o.Component),fn=Object(y.withStyles)(function(e){return{dialog:{},input:{width:500},canvas:{display:"none"},imageContainer:{width:500,height:250,overflow:"scroll",backgroundColor:"#eee",backgroundSize:"40px 40px",backgroundPosition:"0 0, 20px 20px",backgroundImage:"linear-gradient(45deg,#e0e0e0 25%,transparent 25%,transparent 75%,#e0e0e0 75%,#e0e0e0),linear-gradient(45deg,#e0e0e0 25%,transparent 25%,transparent 75%,#e0e0e0 75%,#e0e0e0)"},image:{}}})(Object(v.b)(function(e){return{showExportImageDialog:e.edit.showExportImageDialog,exportImageDataUrl:e.edit.exportImageDataUrl,exportImageBlob:e.edit.exportImageBlob,exportImageContent:e.edit.exportImageContent,exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale}},function(e){return{hideExportImageDialog:function(){return e(Qt.hideExportImageDialog())},createExportImageData:function(t,a,n){return e(Qt.createExportImageData(t,a,n))},updateExportImageOptions:function(t,a){return e(Qt.updateExportImageOptions(t,a))}}})(ca()()(gn))),bn=window.erd,En=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state=Object(g.a)({},a.props.contextDetails),a.handleNameChange=function(e){var t=e.target.value,n=a.props.getStage();n.undoManager.startAction(),n.findById(a.props.contextDetails.id).details.name=t,n.draw(),a.setState({name:t})},a.handleTypeChange=function(e){var t=e.target.value,n=a.props.getStage();n.undoManager.startAction(),n.findById(a.props.contextDetails.id).details.type=t,n.draw(),a.setState({type:t})},a.handleAddAttribute=function(){var e=a.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id),n=t.getNextAutomaticPosition(),r=e.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});e.addItem(r),e.connect.items(r,t),e.selectItem(r),e.draw(),e.invokeDirtyCallback()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.a.createElement(ie.a,{container:!0,spacing:0},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset",className:e.formControl},c.a.createElement(Ca.a,null,"Entity Name"),c.a.createElement(ce.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:function(e){e&&setTimeout(function(){e.focus(),e.select()},0)}},className:e.textField}))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset",className:e.formControl},c.a.createElement(Ca.a,null,"Type"),c.a.createElement(ga.a,{value:this.state.type,onChange:this.handleTypeChange},c.a.createElement(ba.a,{value:bn.EntityType.Regular,control:c.a.createElement(pa.a,null),label:"Regular"}),c.a.createElement(ba.a,{value:bn.EntityType.Weak,control:c.a.createElement(pa.a,null),label:"Weak"}),c.a.createElement(ba.a,{value:bn.EntityType.Associative,control:c.a.createElement(pa.a,null),label:"Associative"})))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{variant:"outlined",onClick:this.handleAddAttribute},"Add Attribute")))}}]),t}(o.Component),vn=Object(y.withStyles)(function(e){return{formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"}}})(Object(v.b)(function(e){return{}},function(e){return{}})(En)),yn=a(82),Cn=a.n(yn),wn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state=Object(g.a)({},a.props.contextDetails),a.handleNameChange=function(e){var t=e.target.value,n=a.props.getStage();n.undoManager.startAction(),n.findById(a.props.contextDetails.id).details.name=t,n.draw(),a.setState({name:t})},a.handleFlagChange=function(e){return function(t){var n=a.props.getStage(),r=n.findById(a.props.contextDetails.id);n.undoManager.startAction(),"isComposite"===e&&r.removeAllChildAttributes(n);var i=!r.details[e];r.details[e]=i,n.draw(),a.setState(Object(j.a)({},e,i))}},a.handleAddAttributeToEntity=function(){var e=a.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id).getOwner(),n=t.getNextAutomaticPosition(),r=e.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});e.addItem(r),e.connect.items(r,t),e.selectItem(r),e.draw(),e.invokeDirtyCallback()},a.handleAddComponentAttribute=function(){var e=a.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id),n=t.getNextAutomaticPosition(),r=e.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});e.addItem(r),e.connect.items(r,t),e.selectItem(r),e.draw(),e.invokeDirtyCallback()},a.handleAddAttributeToComposite=function(){var e=a.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id).getOwner(),n=t.getNextAutomaticPosition(),r=e.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});e.addItem(r),e.connect.items(r,t),e.selectItem(r),e.draw(),e.invokeDirtyCallback()},a.handleAddAttributeToRelationship=function(){var e=a.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id).getOwner(),n=t.getNextAutomaticPosition(),r=e.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});e.addItem(r),e.connect.items(r,t),e.selectItem(r),e.draw(),e.invokeDirtyCallback()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.getStage().findById(this.props.contextDetails.id).getOwner(),t=e&&"Entity"===e.getType(),a=e&&"Relationship"===e.getType(),n=this.state.isComposite,r=e&&"Attribute"===e.getType()&&e.details.isComposite,i=this.props.classes;return c.a.createElement(ie.a,{container:!0,spacing:0},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset",className:i.formControl},c.a.createElement(Ca.a,null,"Attribute Name"),c.a.createElement(ce.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:function(e){e&&setTimeout(function(){e.focus(),e.select()},0)}},className:i.textField}))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset",className:i.formControl},c.a.createElement(Cn.a,null,c.a.createElement(ba.a,{label:"Unique",control:c.a.createElement(Tt.a,{checked:this.state.isUnique,onChange:this.handleFlagChange("isUnique")})}),c.a.createElement(ba.a,{label:"Multivalued",control:c.a.createElement(Tt.a,{checked:this.state.isMultivalued,onChange:this.handleFlagChange("isMultivalued")})}),c.a.createElement(ba.a,{label:"Optional",control:c.a.createElement(Tt.a,{checked:this.state.isOptional,onChange:this.handleFlagChange("isOptional")})}),c.a.createElement(ba.a,{label:"Composite",control:c.a.createElement(Tt.a,{checked:this.state.isComposite,onChange:this.handleFlagChange("isComposite")})}),c.a.createElement(ba.a,{label:"Derived",control:c.a.createElement(Tt.a,{checked:this.state.isDerived,onChange:this.handleFlagChange("isDerived")})})))),t&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{variant:"outlined",onClick:this.handleAddAttributeToEntity},"Add Attribute to Entity")),a&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{variant:"outlined",onClick:this.handleAddAttributeToRelationship},"Add Attribute to Relationship")),n&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{variant:"outlined",onClick:this.handleAddComponentAttribute},"Add Component Attribute")),r&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{variant:"outlined",onClick:this.handleAddAttributeToComposite},"Add Attribute to Composite")))}}]),t}(o.Component),On=Object(y.withStyles)(function(e){return{formControl:{marginTop:0,width:"100%"},textField:{marginTop:0,width:"100%"}}})(Object(v.b)(function(e){return{}},function(e){return{}})(wn)),xn=a(71),Sn=a.n(xn),Dn=a(130),An=a.n(Dn),jn=window.erd,In=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.contextDetails.name,isIdentifying:a.props.contextDetails.isIdentifying,slot0:a.props.contextDetails.slots[0],slot1:a.props.contextDetails.slots[1],showExact:!1},a.handleShowExactChange=function(e){var t=!a.state.showExact;a.setState({showExact:t})},a.handleNameChange=function(e){var t=e.target.value,n=a.props.getStage();n.undoManager.startAction(),n.findById(a.props.contextDetails.id).details.name=t,n.draw(),a.setState({name:t})},a.handleIdentifyingChange=function(e){var t=a.props.getStage();t.undoManager.startAction();var n=t.findById(a.props.contextDetails.id);n.details.isIdentifying=!n.details.isIdentifying,t.draw(),a.setState({isIdentifying:n.details.isIdentifying})},a.handleChangeEntity=function(e){return function(t){var n="slot".concat(e),r=a.props.getStage();r.undoManager.startAction();var i=r.findById(a.props.contextDetails.id),o=a.state[n],c=t.target.value;if(c!==o.entityId){if(0!==o.entityId){var l=i.getSlotConnector(e);l&&l.removeFromStage(r)}if(c>0){var s=r.findById(c);r.connect.items(s,i,{slotIndex:e})}a.setState(Object(j.a)({},n,Object(g.a)({},o,{entityId:c}))),r.invokeDirtyCallback(),r.draw()}}},a.handleMinimumChange=function(e){return function(t){var n="slot".concat(e),r=a.props.getStage(),i=r.findById(a.props.contextDetails.id);r.undoManager.startAction();var o=a.state[n];i.details.slots[e].minimum=t.target.value,r.invokeDirtyCallback(),r.draw(),a.setState(Object(j.a)({},n,Object(g.a)({},o,{minimum:t.target.value})))}},a.handleMaximumChange=function(e){return function(t){var n="slot".concat(e),r=a.props.getStage(),i=r.findById(a.props.contextDetails.id);r.undoManager.startAction();var o=a.state[n];i.details.slots[e].maximum=t.target.value,r.invokeDirtyCallback(),r.draw(),a.setState(Object(j.a)({},n,Object(g.a)({},o,{maximum:t.target.value})))}},a.handleRoleChange=function(e){return function(t){var n="slot".concat(e),r=a.props.getStage(),i=r.findById(a.props.contextDetails.id);r.undoManager.startAction();var o=a.state[n];i.details.slots[e].role=t.target.value,r.invokeDirtyCallback(),r.draw(),a.setState(Object(j.a)({},n,Object(g.a)({},o,{role:t.target.value})))}},a.handleParticipationChange=function(e){return function(t){var n="slot".concat(e),r=a.props.getStage(),i=r.findById(a.props.contextDetails.id);r.undoManager.startAction();var o=a.state[n];i.details.slots[e].participation=t.target.value,r.invokeDirtyCallback(),r.draw(),a.setState(Object(j.a)({},n,Object(g.a)({},o,{participation:t.target.value})))}},a.handleCardinalityChange=function(e){return function(t){var n="slot".concat(e),r=a.props.getStage(),i=r.findById(a.props.contextDetails.id);r.undoManager.startAction();var o=a.state[n];i.details.slots[e].cardinality=t.target.value,r.invokeDirtyCallback(),r.draw(),a.setState(Object(j.a)({},n,Object(g.a)({},o,{cardinality:t.target.value})))}},a.handleAddAttribute=function(){var e=a.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id),n=t.getNextAutomaticPosition(),r=e.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});e.addItem(r),e.connect.items(r,t),e.selectItem(r),e.draw(),e.invokeDirtyCallback()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.getStage().findAllByType("Entity"),t=this.state,a=t.showExact,n=t.slot0,r=t.slot1,i=this.props.classes;return c.a.createElement(ie.a,{container:!0,spacing:0},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset",className:i.formControl},c.a.createElement(Ca.a,null,"Relationship Name"),c.a.createElement(ce.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:function(e){e&&setTimeout(function(){e.focus(),e.select()},0)}},className:i.textField}))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset"},c.a.createElement(Cn.a,null,c.a.createElement(ba.a,{label:"Identifying",control:c.a.createElement(Tt.a,{checked:this.state.isIdentifying,onChange:this.handleIdentifyingChange})})))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ca.a,null,"Entity One")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{className:i.formControl},c.a.createElement(Sn.a,{value:n.entityId,onChange:this.handleChangeEntity(0),displayEmpty:!0,name:"entity1"},c.a.createElement(ht.a,{value:0},c.a.createElement("em",null,"None")),e.map(function(e){return c.a.createElement(ht.a,{key:e.details.id,value:e.details.id},e.details.name)})))),!a&&c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(va.a,{component:"fieldset"},c.a.createElement(ga.a,{value:n.participation,onChange:this.handleParticipationChange(0)},c.a.createElement(ba.a,{value:jn.ParticipationType.mandatory,control:c.a.createElement(pa.a,null),label:"Mandatory"}),c.a.createElement(ba.a,{value:jn.ParticipationType.optional,control:c.a.createElement(pa.a,null),label:"Optional"}),c.a.createElement(ba.a,{value:jn.ParticipationType.unspecified,control:c.a.createElement(pa.a,null),label:"Unspecified"})))),!a&&c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(va.a,{component:"fieldset"},c.a.createElement(ga.a,{value:n.cardinality,onChange:this.handleCardinalityChange(0)},c.a.createElement(ba.a,{value:jn.CardinalityType.one,control:c.a.createElement(pa.a,null),label:"One"}),c.a.createElement(ba.a,{value:jn.CardinalityType.many,control:c.a.createElement(pa.a,null),label:"Many"}),c.a.createElement(ba.a,{value:jn.CardinalityType.unspecified,control:c.a.createElement(pa.a,null),label:"Unspecified"})))),a&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset"},c.a.createElement(ce.a,{id:"slot0min",label:"Minimum",margin:"normal",autoComplete:"off",value:n.minimum,onChange:this.handleMinimumChange(0)}),c.a.createElement(ce.a,{id:"slot0max",label:"Maximum",margin:"normal",autoComplete:"off",value:n.maximum,onChange:this.handleMaximumChange(0)}),c.a.createElement(ce.a,{id:"slot0role",label:"Role",margin:"normal",autoComplete:"off",value:n.role,onChange:this.handleRoleChange(0)}))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ca.a,null,"Entity Two")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{className:i.formControl},c.a.createElement(Sn.a,{value:r.entityId,onChange:this.handleChangeEntity(1),displayEmpty:!0,name:"entity1"},c.a.createElement(ht.a,{value:0},c.a.createElement("em",null,"None")),e.map(function(e){return c.a.createElement(ht.a,{key:e.details.id,value:e.details.id},e.details.name)})))),!a&&c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(va.a,{component:"fieldset"},c.a.createElement(ga.a,{value:r.participation,onChange:this.handleParticipationChange(1)},c.a.createElement(ba.a,{value:jn.ParticipationType.mandatory,control:c.a.createElement(pa.a,null),label:"Mandatory"}),c.a.createElement(ba.a,{value:jn.ParticipationType.optional,control:c.a.createElement(pa.a,null),label:"Optional"}),c.a.createElement(ba.a,{value:jn.ParticipationType.unspecified,control:c.a.createElement(pa.a,null),label:"Unspecified"})))),!a&&c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(va.a,{component:"fieldset"},c.a.createElement(ga.a,{value:r.cardinality,onChange:this.handleCardinalityChange(1)},c.a.createElement(ba.a,{value:jn.CardinalityType.one,control:c.a.createElement(pa.a,null),label:"One"}),c.a.createElement(ba.a,{value:jn.CardinalityType.many,control:c.a.createElement(pa.a,null),label:"Many"}),c.a.createElement(ba.a,{value:jn.CardinalityType.unspecified,control:c.a.createElement(pa.a,null),label:"Unspecified"})))),a&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset"},c.a.createElement(ce.a,{id:"slot1min",label:"Minimum",margin:"normal",autoComplete:"off",value:r.minimum,onChange:this.handleMinimumChange(1)}),c.a.createElement(ce.a,{id:"slot1max",label:"Maximum",margin:"normal",autoComplete:"off",value:r.maximum,onChange:this.handleMaximumChange(1)}),c.a.createElement(ce.a,{id:"slot1role",label:"Role",margin:"normal",autoComplete:"off",value:r.role,onChange:this.handleRoleChange(1)}))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ba.a,{control:c.a.createElement(An.a,{checked:this.state.showExact,onChange:this.handleShowExactChange,color:"primary"}),label:"Edit Exact Constraints"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{variant:"outlined",onClick:this.handleAddAttribute},"Add Attribute")))}}]),t}(o.Component),Tn=Object(y.withStyles)(function(e){return{formControl:{marginTop:0,width:"100%"},textField:{marginTop:0,width:"100%"}}})(Object(G.a)(Object(v.b)(function(e,t){return{}},function(e){return{}})(In))),kn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state=Object(g.a)({},a.props.contextDetails),a.handleTextChange=function(e){var t=e.target.value,n=a.props.getStage();n.undoManager.startAction(),n.findById(a.props.contextDetails.id).details.text=t,n.draw(),a.setState({text:t})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.a.createElement(ie.a,{container:!0,spacing:0},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset",className:e.formControl},c.a.createElement(Ca.a,null,"Text Label"),c.a.createElement(ce.a,{id:"text",margin:"normal",autoComplete:"off",value:this.state.text,onChange:this.handleTextChange,multiline:!0,variant:"outlined",maxrows:10,inputProps:{ref:function(e){e&&setTimeout(function(){e.focus(),e.select()},0)}},className:e.textField}))))}}]),t}(o.Component),Nn=Object(y.withStyles)(function(e){return{formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"}}})(Object(v.b)(function(e){return{}},function(e){return{}})(kn)),Rn=a(72),Mn=a.n(Rn),Fn=a(74),Pn=a.n(Fn),_n=a(38),Ln=a.n(_n),Bn=a(73),Un=a.n(Bn),Gn=a(57),qn=a.n(Gn);var zn=Object(y.withStyles)(function(e){return{nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},nameCellPrimaryKey:{textAlign:"left",paddingLeft:8,paddingRight:4,fontWeight:800,textDecoration:"underline"},nameP:{width:80},checkCell:{textAlign:"center",paddingLeft:4,paddingRight:4},dataTypeCell:{textAlign:"left",paddingLeft:8,paddingRight:4},dataTypeSizeCell:{textAlign:"left",paddingLeft:8,paddingRight:4},dataTypeP:{width:90},dataTypeSizeP:{width:60}}})(function(e){var t=e.classes,a=e.handleClickRow,n=e.names,r=e.pkMember,i=(e.optional,e.soloUnique,e.dataType);return c.a.createElement(qn.a,{hover:!0,onClick:a},c.a.createElement(Ln.a,{className:r?t.nameCellPrimaryKey:t.nameCell},n.map(function(e,a){return c.a.createElement("p",{key:a,className:t.nameP},e)})),c.a.createElement(Ln.a,{className:t.dataTypeCell},c.a.createElement("p",{className:t.dataTypeP},i&&i.name)),c.a.createElement(Ln.a,{className:t.dataTypeSizeCell},c.a.createElement("p",{className:t.dataTypeSizeP},i&&i.size)))}),Wn=a(66),Hn=a.n(Wn),Kn=[{id:"none",sql:"",name:"None",hasSize:!1,isCustom:!1},{id:"charn",name:"CHAR(n)",sql:"CHAR",hasSize:!0,isCustom:!1},{id:"varcharn",name:"VARCHAR(n)",sql:"VARCHAR",hasSize:!0,isCustom:!1},{id:"int",name:"INT",sql:"INT",hasSize:!1,isCustom:!1},{id:"numeric",name:"NUMERIC(p s)",sql:"NUMERIC",hasSize:!0,isCustom:!1},{id:"date",name:"DATE",sql:"DATE",hasSize:!1,isCustom:!1},{id:"float",name:"FLOAT",sql:"FLOAT",hasSize:!1,isCustom:!1},{id:"custom",name:"Custom",sql:"",hasSize:!0,isCustom:!0}];var Vn=Object(y.withStyles)(function(e){return{nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},cell:{textAlign:"center",paddingLeft:4,paddingRight:4},input:{width:"100%",fontSize:"0.8125rem"},dataTypeCell:{textAlign:"left",paddingLeft:4,paddingRight:4},dataTypeSelect:{width:90,fontSize:"0.8125rem"}}})(function(e){var t=function(e){e&&setTimeout(function(){e.focus(),e.select()},0)},a=e.classes,n=e.names,r=(e.pkMember,e.dataType),i=e.dataTypeSize,o=e.handleAttributeNameChange,l=e.handleDataTypeChange,s=e.handleDataTypeSizeChange;return c.a.createElement(qn.a,{selected:!0,hover:!0},c.a.createElement(Ln.a,{className:a.nameCell},n.map(function(e,n){return 0===n?c.a.createElement(Hn.a,{key:n,value:e,className:a.input,inputProps:{ref:t},onChange:function(e){return o(e.target.value,n)}}):c.a.createElement(Hn.a,{key:n,value:e,className:a.input,onChange:function(e){return o(e.target.value,n)}})})),c.a.createElement(Ln.a,{className:a.dataTypeCell},c.a.createElement(va.a,null,c.a.createElement(Sn.a,{value:r&&r.id,onChange:l,displayEmpty:!0,name:"dataType",className:a.dataTypeSelect},Kn.map(function(e){return c.a.createElement(ht.a,{key:e.id,value:e.id},e.name)})))),c.a.createElement(Ln.a,{className:a.cell},r&&r.hasSize&&c.a.createElement(Hn.a,{value:i,className:a.input,onChange:s})))});var Yn=Object(y.withStyles)(function(e){return{nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},checkCell:{textAlign:"center",paddingLeft:4,paddingRight:4}}})(function(e){var t=e.classes,a=e.attributes,n=e.selectedAttributeId,r=e.handleAttributeNameChange,i=e.handleClickRow,o=e.handleDataTypeChange,l=e.handleDataTypeSizeChange,s=e.dataTypes;return c.a.createElement(Mn.a,null,c.a.createElement(Un.a,null,c.a.createElement(qn.a,null,c.a.createElement(Ln.a,{className:t.nameCell},"Name"),c.a.createElement(Ln.a,{className:t.nameCell},"Data Type"),c.a.createElement(Ln.a,{className:t.checkCell},"Data Type Size"))),c.a.createElement(Pn.a,null,a.map(function(e){var t=function(e){var t=Kn.find(function(t){return t.id===e});return t||(t=Kn.find(function(e){return"none"===e.id})),t}(e.dataType);return n===e.id?c.a.createElement(Vn,{key:e.id,names:e.names,pkMember:e.pkMember,dataType:t,dataTypeSize:e.dataTypeSize,handleAttributeNameChange:r,handleDataTypeChange:o,handleDataTypeSizeChange:l,dataTypes:s}):c.a.createElement(zn,{key:e.id,names:e.names,pkMember:e.pkMember,dataType:t,handleClickRow:function(){return i(e.id)}})})))});var Qn=Object(y.withStyles)(function(e){return{cell:{textAlign:"center",paddingLeft:0,paddingRight:0}}})(function(e){var t=e.classes,a=e.attributes,n=e.checkedAttributeIds,r=e.handleAttributeChecked,i=e.disabledAttributes,o=[];return i&&(o=i.map(function(e){return e.id})),c.a.createElement(Mn.a,null,c.a.createElement(Un.a,null,c.a.createElement(qn.a,null,c.a.createElement(Ln.a,{className:t.cell},"Key"),c.a.createElement(Ln.a,{className:t.cell},"Name"))),c.a.createElement(Pn.a,null,a.map(function(e){return c.a.createElement(qn.a,{key:e.id},c.a.createElement(Ln.a,{className:t.cell},c.a.createElement(Tt.a,{disabled:o.includes(e.id),checked:n.includes(e.id),onChange:function(){return r(e.id)}})),c.a.createElement(Ln.a,null,e.names.map(function(e,t){return c.a.createElement("p",{key:t},e)})))})))}),Jn=a(245),Xn=a.n(Jn),Zn=a(246),$n=a.n(Zn);var er,tr=Object(y.withStyles)(function(e){return{nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},cell:{textAlign:"center",paddingLeft:0,paddingRight:0}}})(function(e){for(var t=e.classes,a=e.attributes,n=e.handleAttributeMoveUp,r=e.handleAttributeMoveDown,i=[],o=0;o<a.length;++o)i.push(Object(g.a)({},a[o],{prevId:o>0?a[o-1].id:null,nextId:o<a.length-1?a[o+1].id:null}));return c.a.createElement(Mn.a,null,c.a.createElement(Un.a,null,c.a.createElement(qn.a,null,c.a.createElement(Ln.a,{className:t.nameCell},"Name"),c.a.createElement(Ln.a,{className:t.cell}))),c.a.createElement(Pn.a,null,i.map(function(e){return c.a.createElement(qn.a,{key:e.id},c.a.createElement(Ln.a,{className:t.nameCell},e.names.map(function(e,t){return c.a.createElement("p",{key:t},e)})),c.a.createElement(Ln.a,{className:t.cell},c.a.createElement(te.a,{"aria-label":"Move Up",onClick:function(){return n(e.id,e.prevId)},disabled:!e.prevId},c.a.createElement(Xn.a,null)),c.a.createElement(te.a,{"aria-label":"Move Down",onClick:function(){return r(e.id,e.nextId)},disabled:!e.nextId},c.a.createElement($n.a,null))))})))}),ar={Normal:"normal",Remove:"remove",Groups:"groups",Reorder:"reorder",PrimaryKey:"primaryKey",Unique:"unique",Optional:"optional"},nr=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state=Object(g.a)({},a.props.contextDetails,{selectedAttributeId:0,mode:ar.Normal,checkedAttributeIds:[],currentGroupIndex:-1,menuAnchor:null}),a.handleNameChange=function(e){var t=e.target.value,n=a.props.getStage();n.undoManager.startAction(),n.findById(a.props.contextDetails.id).details.name=t,n.draw(),a.setState({name:t})},a.handleClickRow=function(e){a.setState({selectedAttributeId:e})},a.handleAttributeNameChange=function(e,t){var n=a.props.getStage();n.undoManager.startAction();var r=n.findById(a.props.contextDetails.id);r.getAttributeById(a.state.selectedAttributeId).names[t]=e,n.draw(),a.setState(Object(g.a)({},r.details))},a.handleAddAttribute=function(){var e=a.props.getStage();e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id).addAttribute({names:["New Column"]});e.draw(),a.setState(Object(g.a)({},a.props.contextDetails,{selectedAttributeId:t.id}))},a.handleSetMode=function(e){a.setState({mode:e})},a.handleAttributeChecked=function(e){var t=Object(xe.a)(a.state.checkedAttributeIds);t=t.includes(e)?t.filter(function(t){return t!==e}):Object(xe.a)(t).concat([e]),a.setState({checkedAttributeIds:t})},a.handleRemoveCheckedAttributes=function(){var e=a.props.getStage();e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id);a.state.checkedAttributeIds.forEach(function(a){var n=t.getAttributeById(a);t.removeAttribute(n,e)}),a.handleEndAttributeChecks(),e.draw()},a.handleEndAttributeChecks=function(){a.setState({mode:ar.Normal,checkedAttributeIds:[]})},a.handlePrimaryKeyMode=function(){var e=a.props.getStage().findById(a.props.contextDetails.id).getAttributesByOrder().filter(function(e){return e.pkMember}).map(function(e){return e.id});a.setState({mode:ar.PrimaryKey,checkedAttributeIds:e})},a.handleSavePrimaryKeyChecks=function(){var e=a.props.getStage(),t=e.findById(a.props.contextDetails.id);t.removePkConnectors(e),t.getAttributesByOrder().map(function(e){return e.id}).forEach(function(e){var n=t.getAttributeById(e);n.pkMember=a.state.checkedAttributeIds.includes(n.id),n.pkMember&&(n.optional=!1)}),e.draw(),e.invokeDirtyCallback(),a.setState(Object(g.a)({},a.props.contextDetails,{mode:ar.Normal,checkedAttributeIds:[]}))},a.handleCancelPrimaryKeyChecks=function(){a.setState({mode:ar.Normal,checkedAttributeIds:[]})},a.handleOptionalMode=function(){var e=a.props.getStage().findById(a.props.contextDetails.id).getAttributesByOrder().filter(function(e){return e.optional}).map(function(e){return e.id});a.setState({mode:ar.Optional,checkedAttributeIds:e})},a.handleSaveOptionalMode=function(){var e=a.props.getStage(),t=e.findById(a.props.contextDetails.id);t.getAttributesByOrder().map(function(e){return e.id}).forEach(function(e){var n=t.getAttributeById(e);n.optional=a.state.checkedAttributeIds.includes(n.id)}),e.draw(),e.invokeDirtyCallback(),a.setState(Object(g.a)({},a.props.contextDetails,{mode:ar.Normal,checkedAttributeIds:[]}))},a.handleCancelOptionalMode=function(){a.setState({mode:ar.Normal,checkedAttributeIds:[]})},a.handleUniqueMode=function(){var e=a.props.getStage().findById(a.props.contextDetails.id).getAttributesByOrder().filter(function(e){return e.soloUnique}).map(function(e){return e.id});a.setState({mode:ar.Unique,checkedAttributeIds:e})},a.handleSaveUniqueMode=function(){var e=a.props.getStage(),t=e.findById(a.props.contextDetails.id);t.getAttributesByOrder().map(function(e){return e.id}).forEach(function(e){var n=t.getAttributeById(e);n.soloUnique=a.state.checkedAttributeIds.includes(n.id)}),e.draw(),e.invokeDirtyCallback(),a.setState(Object(g.a)({},a.props.contextDetails,{mode:ar.Normal,checkedAttributeIds:[]}))},a.handleCancelUniqueMode=function(){a.setState({mode:ar.Normal,checkedAttributeIds:[]})},a.handleEditGroup=function(e){var t=e>=0?a.state.uniqueGroups[e]:[];a.setState({currentGroupIndex:e,checkedAttributeIds:t}),a.handleMenuClose(),a.handleSetMode(ar.Groups)},a.handleAddGroup=function(){var e=a.props.getStage();e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id);t.details.uniqueGroups.push([]),e.draw();var n=t.details.uniqueGroups.length-1;a.setState({currentGroupIndex:n,checkedAttributeIds:[],contextDetails:t.details}),a.handleMenuClose(),a.handleSetMode(ar.Groups)},a.handleRemoveGroup=function(){var e=a.state.currentGroupIndex,t=a.props.getStage();t.undoManager.startAction();var n=t.findById(a.props.contextDetails.id);n.details.uniqueGroups.splice(e,1),t.draw();var r=(e=Math.min(e,n.details.uniqueGroups.lenght-1))>=0?a.state.uniqueGroups[e]:[];a.setState({currentGroupIndex:e,contextDetails:n.details,checkedAttributeIds:r}),a.handleSetMode(ar.Normal)},a.handleGroupAttributeChecked=function(e){var t=Object(xe.a)(a.state.checkedAttributeIds);t=t.includes(e)?t.filter(function(t){return t!==e}):Object(xe.a)(t).concat([e]);var n=a.props.getStage();n.undoManager.startAction();var r=n.findById(a.props.contextDetails.id);r.details.uniqueGroups[a.state.currentGroupIndex]=t,n.draw(),a.setState({contextDetails:r.details,checkedAttributeIds:t})},a.handleMenuOpen=function(e){a.setState({menuAnchor:e})},a.handleMenuClose=function(){a.setState({menuAnchor:null})},a.handleDataTypeChange=function(e){var t=a.props.getStage();t.undoManager.startAction();var n=t.findById(a.props.contextDetails.id).getAttributeById(a.state.selectedAttributeId);n.dataType=e.target.value,n.dataTypeSize="",t.draw(),a.setState(Object(g.a)({},a.props.contextDetails))},a.handleDataTypeSizeChange=function(e){var t=a.props.getStage();t.undoManager.startAction(),t.findById(a.props.contextDetails.id).getAttributeById(a.state.selectedAttributeId).dataTypeSize=e.target.value,t.draw(),a.setState(Object(g.a)({},a.props.contextDetails))},a.handleEndAttributeReorder=function(){a.setState({mode:ar.Normal})},a.handleAttributeOrderSwap=function(e,t){var n=a.props.getStage();n.undoManager.startAction();var r=n.findById(a.props.contextDetails.id);console.log(r.details),r.details.sort="manual";var i=r.getAttributeById(e),o=r.getAttributeById(t);i.order===o.order&&r.getAttributesByOrder().forEach(function(e,t){e.order=t});var c=i.order;i.order=o.order,o.order=c,r.updateAllAnchors(),n.draw(),a.setState({contextDetails:r.details})},a.handleAddRecursiveKey=function(){var e=a.props.getStage();e.undoManager.startAction();var t=e.findById(a.props.contextDetails.id);e.connect.items(t,t),t.updateAllAnchors(),e.draw(),a.setState({contextDetails:t.details})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.menuAnchor,r=a.uniqueGroups,i=a.selectedAttributeId,o=a.mode,l=a.checkedAttributeIds,s=a.currentGroupIndex,u=this.props.getStage().findById(this.props.contextDetails.id).getAttributesByOrder();return c.a.createElement(ie.a,{container:!0,spacing:0},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(va.a,{component:"fieldset",className:t.formControl},c.a.createElement(Ca.a,null,"Table Name"),c.a.createElement(ce.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:function(e){e&&setTimeout(function(){e.focus(),e.select()},0)}},className:t.textField}))),o===ar.Normal&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handlePrimaryKeyMode},"Primary Key")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{"aria-owns":n?"ugroups-menu":null,variant:"outlined",className:t.mainButton,onClick:function(t){return e.handleMenuOpen(t.currentTarget)}},"(U) Groups ..."),c.a.createElement(mt.a,{id:"ugroups-menu",open:Boolean(n),anchorEl:n,onClose:this.handleMenuClose},c.a.createElement(ht.a,{onClick:this.handleAddGroup},"Add New Unique Group"),r.map(function(t,a){return c.a.createElement(ht.a,{key:a,value:a,onClick:function(){return e.handleEditGroup(a)}},"Edit Unique Group ",a+1)}))),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleAddRecursiveKey},"Recursive Key")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:function(){return e.handleSetMode(ar.Reorder)}},"Reorder ...")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleUniqueMode},"Unique ...")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleOptionalMode},"Optional ...")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ca.a,null,"Columns")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleAddAttribute},"Add")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:function(){return e.handleSetMode(ar.Remove)}},"Remove ...")))),o===ar.PrimaryKey&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleSavePrimaryKeyChecks},"Save")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleCancelPrimaryKeyChecks},"Cancel")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ca.a,null,"Select columns for the Primary Key")))),o===ar.Remove&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleRemoveCheckedAttributes},"Remove")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleEndAttributeChecks},"Cancel")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ca.a,null,"Select columns to remove")))),o===ar.Unique&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleSaveUniqueMode},"Save")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleCancelUniqueMode},"Cancel")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ca.a,null,"Select Unique columns")))),o===ar.Optional&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleSaveOptionalMode},"Save")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleCancelOptionalMode},"Cancel")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ca.a,null,"Select Optional columns")))),o===ar.Reorder&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleEndAttributeReorder},"Done")))),o===ar.Groups&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Ca.a,null,"Edit Unique Group ",s+1)),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleRemoveGroup},"Remove")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement(w.a,{variant:"outlined",className:t.mainButton,onClick:this.handleEndAttributeChecks},"Done")))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("div",{className:t.tableContainer},o===ar.Normal&&c.a.createElement(Yn,{attributes:u,selectedAttributeId:i,handleAttributeNameChange:this.handleAttributeNameChange,handleClickRow:this.handleClickRow,handleDataTypeChange:this.handleDataTypeChange,handleDataTypeSizeChange:this.handleDataTypeSizeChange}),o===ar.Remove&&c.a.createElement(Qn,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleAttributeChecked}),o===ar.PrimaryKey&&c.a.createElement(Qn,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleAttributeChecked}),o===ar.Unique&&c.a.createElement(Qn,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleAttributeChecked}),o===ar.Optional&&c.a.createElement(Qn,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleAttributeChecked,disabledAttributes:u.filter(function(e){return e.pkMember})}),o===ar.Groups&&c.a.createElement(Qn,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleGroupAttributeChecked}),o===ar.Reorder&&c.a.createElement(tr,{attributes:u,handleAttributeMoveUp:this.handleAttributeOrderSwap,handleAttributeMoveDown:this.handleAttributeOrderSwap}))))}}]),t}(o.Component),rr=Object(y.withStyles)(function(e){return{tableContainer:{overflow:"auto"},cell:{textAlign:"center",paddingLeft:0,paddingRight:0},input:{width:"100%"},formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"},mainButton:{width:"100%"}}})(Object(G.a)(Object(v.b)(function(e,t){return{}},function(e){return{}})(nr))),ir=window.erd,or=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).tryLoadDiagram=function(){var t=e.props,a=t.editDiagram,n=t.setCanvasSize;if(!e.isReady&&a){e.isReady=!0;var r=new ir.DiagramArchive(e.stage).fromJson(a.content);"number"===typeof r.width&&"number"===typeof r.height&&n(r.width,r.height)}e.stage&&e.isReady&&setTimeout(function(){return e.stage.draw()},0),e.setUndoRedo()},e.setUndoRedo=function(){e.stage&&e.props.setUndoRedo(e.stage.undoManager.canUndo(),e.stage.undoManager.canRedo())},e.activeItemChangedCallback=function(t){e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),t?e.props.setContext(t.details,t.getType()):e.props.clearContext()},e.startMoveCallback=function(){e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),e.stage.undoManager.startAction()},e.endMoveCallback=function(){e.stage.undoManager.endAction(),e.dirtyCallback()},e.connectModeEndCallback=function(){},e.dirtyCallback=function(){e.setUndoRedo(),e.props.setIsDirty(!0),e.autoSaveTimer&&(clearTimeout(e.autoSaveTimer),e.autoSaveTimer=null),e.autoSaveTimer=setTimeout(e.handleSave,8e3)},e.handleSave=function(){e.autoSaveTimer&&(clearTimeout(e.autoSaveTimer),e.autoSaveTimer=null);var t=e.props,a=t.saveEditDiagram,n=t.editDiagram,r=new ir.DiagramArchive(e.stage);a(Object(g.a)({},n,{content:r.toJson()}))},e.mouseModeResetCallback=function(t){e.props.setMouseMode(t)},e.selectedCountChange=function(){e.props.setCanDelete(e.stage.selectedCount())},e.getStage=function(){return e.stage},e.isReady=!1,e.autoSaveTimer=null,e.canvasElement=c.a.createRef(),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/edit-diagram");var e={activeItemChangedCallback:this.activeItemChangedCallback,startMoveCallback:this.startMoveCallback,endMoveCallback:this.endMoveCallback,connectModeEndCallback:this.connectModeEndCallback,dirtyCallback:this.dirtyCallback,mouseModeResetCallback:this.mouseModeResetCallback,selectedCountChange:this.selectedCountChange};this.stage=new ir.DiagramStage(this.canvasElement.current,e),this.tryLoadDiagram()}},{key:"componentDidUpdate",value:function(){this.tryLoadDiagram()}},{key:"componentWillUnmount",value:function(){this.props.clearContext(),this.autoSaveTimer&&this.handleSave()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.editDiagram,n=e.canvasWidth,r=e.canvasHeight,i=e.contextType,o=e.contextDetails,l=e.mouseMode,s=a?a.diagramType:"none",u=[t.canvas];return"connect"===l&&u.push(t.canvasConnectMode),c.a.createElement("section",{className:t.section},c.a.createElement(ne,null),c.a.createElement(pn,null),c.a.createElement(fn,{getStage:this.getStage}),c.a.createElement(dn,{diagramType:s,getStage:this.getStage,handleSave:this.handleSave}),c.a.createElement("div",{className:t.contextArea},"Entity"===i&&c.a.createElement(vn,{key:o.id,contextDetails:o,getStage:this.getStage}),"Attribute"===i&&c.a.createElement(On,{key:o.id,contextDetails:o,getStage:this.getStage}),"Relationship"===i&&c.a.createElement(Tn,{key:o.id,contextDetails:o,getStage:this.getStage}),"Label"===i&&c.a.createElement(Nn,{key:o.id,contextDetails:o,getStage:this.getStage}),"Table"===i&&c.a.createElement(rr,{key:o.id,contextDetails:o,getStage:this.getStage}),"Dimension"===i&&c.a.createElement(rr,{key:o.id,contextDetails:o,getStage:this.getStage}),"Fact"===i&&c.a.createElement(rr,{key:o.id,contextDetails:o,getStage:this.getStage})),c.a.createElement("div",{className:t.canvasParent},c.a.createElement("canvas",{className:u.join(" "),width:n,height:r,ref:this.canvasElement})))}}]),t}(o.Component),cr=Object(y.withStyles)(function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},contextArea:{paddingTop:120,position:"fixed",top:0,right:0,width:320,height:"100%",overflow:"auto",background:"#eeeeee",padding:5},canvasParent:{overflow:"scroll",height:"100%",marginRight:320},canvas:{border:"1px solid #aaa",margin:0,backgroundColor:e.palette.background.paper},canvasConnectMode:{cursor:"crosshair"}}})(Object(G.a)(Object(v.b)(function(e,t){return{editDiagram:rt(e,t),canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight,contextDetails:e.edit.contextDetails,contextType:e.edit.contextType,mouseMode:e.edit.mouseMode}},function(e){return{setContext:function(t,a){return e(Qt.setContext(t,a))},setIsDirty:function(t){return e(Qt.setIsDirty(t))},clearContext:function(){return e(Qt.clearContext())},setMouseMode:function(t){return e(Qt.setMouseMode(t))},setUndoRedo:function(t,a){return e(Qt.setUndoRedo(t,a))},setCanDelete:function(t){return e(Qt.setCanDelete(t))},setCanvasSize:function(t,a){return e(Qt.setCanvasSize(t,a))},saveEditDiagram:function(t){return e(Qt.saveEditDiagram(t))}}})(or))),lr=Object(I.createActions)({resetPasswordStart:["email"],resetPasswordStartSuccess:["email","duration"],resetPasswordStartFailure:null,resetPasswordComplete:["token","password","history"],resetPasswordCompleteSuccess:null,resetPasswordCompleteFailure:null}),sr=lr.Types,ur=lr.Creators,dr=Object(I.createReducer)({email:null,error:null,forgotSuccess:!1},(er={},Object(j.a)(er,sr.RESET_PASSWORD_START,function(e){return Object(g.a)({},e,{forgotSuccess:!1})}),Object(j.a)(er,sr.RESET_PASSWORD_START_SUCCESS,function(e,t){return Object(g.a)({},e,{email:t.email,duration:t.duration,forgotSuccess:!0})}),Object(j.a)(er,sr.RESET_PASSWORD_START_FAILURE,function(e,t){return Object(g.a)({},e,{error:t.error})}),Object(j.a)(er,sr.RESET_PASSWORD_COMPLETE,function(e){return e}),Object(j.a)(er,sr.RESET_PASSWORD_COMPLETE_SUCCESS,function(e){return e}),Object(j.a)(er,sr.RESET_PASSWORD_COMPLETE_FAILURE,function(e){return e}),er)),mr=sr,pr=ur,hr=Object(tt.createSelector)([function(e,t){return t.history.location.pathname}],function(e){var t=e.split("/");return 3===t.length&&"reset-password"===t[1]?t[2]:null}),gr=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",confirmPassword:"",isPasswordDirty:!1,isConfirmPasswordDirty:!1},a.handlePasswordChange=function(e){a.setState({password:e.target.value,isPasswordDirty:!0})},a.handleConfirmPasswordChange=function(e){a.setState({confirmPassword:e.target.value,isConfirmPasswordDirty:!0})},a.handleSubmit=function(){a.props.resetPasswordComplete(a.props.token,a.state.password,a.props.history)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/reset-password")}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.password,n=t.confirmPassword,r=t.isPasswordDirty,i=t.isConfirmPasswordDirty,o=!a||a.length<8||a!==n,l=r&&a.length<8?"Password must be longer than 8 characters":"",s=i&&a!==n?"Passwords do not match":"";return c.a.createElement("section",{className:e.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,className:e.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h4"},"Reset Forgotten Password")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"password",label:"Password",margin:"normal",className:e.textField,value:a,onChange:this.handlePasswordChange,helperText:l,type:"password"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"confirmPassword",label:"Confirm Password",margin:"normal",className:e.textField,value:n,onChange:this.handleConfirmPasswordChange,helperText:s,type:"password"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{className:e.submitButton,disabled:o,variant:"outlined",color:"primary",onClick:this.handleSubmit},"Set Password"))))}}]),t}(o.Component),fr=Object(y.withStyles)(function(e){return{textField:{margin:e.spacing.unit,width:300},submitButton:{margin:e.spacing.unit,width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:3*e.spacing.unit,textAlign:"center"}}})(Object(G.a)(Object(v.b)(function(e,t){return console.log("ResetPasswordSubmitPage mapStateToProps"),{duration:e.resetPassword.duration,token:hr(e,t)}},function(e){return{resetPasswordComplete:function(t,a,n){return e(pr.resetPasswordComplete(t,a,n))}}})(gr))),br=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={email:""},a.catchReturn=function(e){"Enter"===e.key&&(e.preventDefault(),a.handleSubmit())},a.handleEmailChange=function(e){a.setState({email:e.target.value})},a.handleSubmit=function(){var e=a.state.email;e&&a.props.resetPasswordStart(e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/forgot-password")}},{key:"render",value:function(){var e=this.state.email,t=this.props,a=t.classes,n=t.forgotSuccess,r=!e;return c.a.createElement("section",{className:a.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,className:a.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h4"},"Forgot Password")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"email",label:"Email",margin:"normal",className:a.textField,value:e,onChange:this.handleEmailChange,onKeyPress:this.catchReturn})),!n&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{className:a.submitButton,disabled:r,variant:"outlined",color:"primary",onClick:this.handleSubmit},"Submit")),n&&c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"body1"},"Check your email for the reset password link."))))}}]),t}(o.Component),Er=Object(y.withStyles)(function(e){return{textField:{margin:e.spacing.unit,width:300},submitButton:{margin:e.spacing.unit,width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:3*e.spacing.unit,textAlign:"center"}}})(Object(G.a)(Object(v.b)(function(e){return{forgotSuccess:e.resetPassword.forgotSuccess}},function(e){return{resetPasswordStart:function(t){return e(pr.resetPasswordStart(t))}}})(br))),vr=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/faq")}},{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("section",{className:e.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,md:3}),c.a.createElement(ie.a,{item:!0,xs:12,md:6,className:e.words},c.a.createElement(se.a,{variant:"h5",className:e.title},"How do I create a unary relationship in an ER Diagram?"),c.a.createElement(se.a,{variant:"body1"},"Create a unary relationship by clicking on the relationship icon (diamond), placing the relationship diamond on the drawing surface, naming the relationship, choosing the same entity for Entity One and Entity Two in the Edit relationship dialog box, and choosing appropriate cardinality constraints."),c.a.createElement("img",{alt:"Set Entity One and Entity Two to the same entity for the relationship",src:"UnaryRelationship.png",className:e.img}),c.a.createElement(se.a,{variant:"h5",className:e.title},"How do I make a ternary relationship in an ER Diagram?"),c.a.createElement(se.a,{variant:"body1"},"In ERDPlus a ternary relationship is made using the associative entity feature. Here is an example of a ternary relationship."),c.a.createElement("img",{alt:"An associative entity",src:"TernaryRelationship.png",className:e.img}),c.a.createElement(se.a,{variant:"h5",className:e.title},"How do I make a foreign key in a Relational Schema?"),c.a.createElement(se.a,{variant:"body1"},"To create a foreign key, click on the connect button. Then click on the table where the foreign key is sourced from and drag to the table that is getting the foreign key. This sequence of actions is illustrated with the following three figures"),c.a.createElement("img",{alt:"Use connect mode",src:"RelationalSchemaFK1.png",className:e.img}),c.a.createElement("img",{alt:"Draw a connecting line from one table to the other",src:"RelationalSchemaFK2.png",className:e.img}),c.a.createElement("img",{alt:"The completed foreign key",src:"RelationalSchemaFK3.png",className:e.img})),c.a.createElement(ie.a,{item:!0,md:3})))}}]),t}(o.Component),yr=Object(y.withStyles)(function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},title:{marginTop:20,marginBottom:10},words:{margin:10},img:{boxShadow:"0 0 5px 0px",margin:5,textAlign:"center"},contentArea:{height:"100%"}}})(Object(v.b)(function(e){return{}},function(e){return{}})(vr)),Cr=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/privacy-policy")}},{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("section",{className:e.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,md:3}),c.a.createElement(ie.a,{item:!0,xs:12,md:6,className:e.words},c.a.createElement(se.a,{variant:"h3",className:e.title},"Privacy Policy"),c.a.createElement(se.a,{variant:"body1"},"This privacy policy discloses the privacy practices for https://erdplus.com. This privacy policy applies solely to information collected by this web site. It will notify you of the following:"),c.a.createElement("ol",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"What personally identifiable information is collected from you through the web site, how it is used and with whom it may be shared.")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"What choices are available to you regarding the use of your data.")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"The security procedures in place to protect the misuse of your information."))),c.a.createElement(se.a,{variant:"h6"},"Information Collection, Use, and Sharing"),c.a.createElement(se.a,{variant:"body1"},"We are the sole owners of the information collected on this site. We only have access to/collect information that you voluntarily give us via email or other direct contact from you. We will not sell or rent this information to anyone. We will use your information to respond to you, regarding the reason you contacted us. We will not share your information with any third party outside of our organization."),c.a.createElement(se.a,{variant:"h6"},"Your Access to and Control Over Information"),c.a.createElement(se.a,{variant:"body1"},"You can do the following at any time by contacting us via the email address on our website:"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"See what data we have about you, if any.")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Change/correct any data we have about you.")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Have us delete any data we have about you.")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Express any concern you have about our use of your data."))),c.a.createElement(se.a,{variant:"h6"},"Security"),c.a.createElement(se.a,{variant:"body1"},"We take precautions to protect your information. When you submit sensitive information via the website, your information is protected both online and offline."),c.a.createElement(se.a,{variant:"body1"},'Wherever we collect sensitive information (such as passwords), that information is encrypted and transmitted to us in a secure way. You can verify this by looking for a closed lock icon at the bottom of your web browser, or looking for "https" at the beginning of the address of the web page.'),c.a.createElement(se.a,{variant:"body1"},"While we use encryption to protect sensitive information transmitted online, we also protect your information offline. Only employees who need the information to perform a specific job are granted access to personally identifiable information. The computers/servers in which we store personally identifiable information are kept in a secure environment."),c.a.createElement(se.a,{variant:"h6"},"Registration"),c.a.createElement(se.a,{variant:"body1"},"In order to use this website, a user may first optionally complete the registration form. Registration is required to use some features of the site. During registration a user is required to give certain information (such as name and email address). This information is used to contact you about the products/services on our site in which you have expressed interest."),c.a.createElement(se.a,{variant:"h6"},"Cookies"),c.a.createElement(se.a,{variant:"body1"},'We use "cookies" on this site. A cookie is a piece of data stored on a site visitor\'s hard drive to help us improve your access to our site and identify repeat visitors to our site. For instance, when we use a cookie to identify you, you would not have to log in a password more than once, thereby saving time while on our site. Cookies can also enable us to track and target the interests of our users to enhance the experience on our site. Usage of a cookie is in no way linked to any personally identifiable information on our site.'),c.a.createElement(se.a,{variant:"h6"},"Updates"),c.a.createElement(se.a,{variant:"body1"},"Our Privacy Policy may change from time to time and all updates will be posted on this page."),c.a.createElement(se.a,{variant:"body1"},"If you feel that we are not abiding by this privacy policy, you should contact us immediately via email to info@erdplus.com.")),c.a.createElement(ie.a,{item:!0,md:3})))}}]),t}(o.Component),wr=Object(y.withStyles)(function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},title:{marginTop:20,marginBottom:10},words:{margin:10}}})(Object(v.b)(function(e){return{}},function(e){return{}})(Cr)),Or=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/")}},{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("section",{className:e.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,className:e.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12,style:{textAlign:"center"}},c.a.createElement("img",{alt:"ERDPlus logo",src:"erdplus_logo_large.png"})),c.a.createElement(ie.a,{item:!0,xs:12,style:{textAlign:"center"}},c.a.createElement(se.a,{variant:"h5"},"A database modeling tool for creating Entity Relationship Diagrams, Relational Schemas, Star Schemas, and SQL DDL statements.")),c.a.createElement(ie.a,{item:!0,xs:4,className:e.descriptionGridItem},c.a.createElement(de.a,{className:e.descriptionPaper},c.a.createElement(se.a,{variant:"h6"},"Database Modeling"),c.a.createElement(se.a,{variant:"body1"},"ERDPlus is a web-based database modeling tool that lets you quickly and easily create"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Entity Relationship Diagrams (ERDs)")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Relational Schemas (Relational Diagrams)")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Star Schemas (Dimensional Models)"))),c.a.createElement(se.a,{variant:"body1"},"More features"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Automatically convert ER Diagrams into Relational Schemas")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Export SQL")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Export diagrams as a PNG")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Save diagrams safely on our server"))))),c.a.createElement(ie.a,{item:!0,xs:4,className:e.descriptionGridItem},c.a.createElement(de.a,{className:e.descriptionPaper},c.a.createElement(se.a,{variant:"h6"},"SQL DDL Statements"),c.a.createElement(se.a,{variant:"body1"},"Export standard SQL"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Generate SQL from Relational Schemas and Star Schemas")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Select from common data types and data sizes")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Works with most contemporary RDBMS tools including Oracle, MySQL, Microsoft SQL Server, PostgresSQL, Teradata, IBM DB2, Microsoft Access, and others."))))),c.a.createElement(ie.a,{item:!0,xs:4},c.a.createElement(de.a,{className:e.descriptionPaper},c.a.createElement(se.a,{variant:"h6"},"Textbook"),c.a.createElement(se.a,{variant:"body1"},"The textbook using ERDPlus is available from a new publisher at a much lower price! Get the eBook for $51.50 or paperback for $74.50."),c.a.createElement("img",{alt:"Book cover",src:"dbtextbook_cover.png",className:e.textbookImage}))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(de.a,null,c.a.createElement(ie.a,{container:!0,className:e.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h3"},"Entity Relationship Diagrams (ERDs)")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("img",{alt:"Sample diagram",src:"ERDSample.png"})),c.a.createElement(ie.a,{item:!0,xs:4,className:e.textAlignLeft},c.a.createElement(se.a,{variant:"h6"},"ERDPlus enables drawing standard ERD components."),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Entities")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Attributes")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Relationships"))),c.a.createElement(se.a,{variant:"body1"},"The notation supports drawing regular and weak entities, various types of attributes (regular, unique, multi-valued, derived, composite, and optional), and all possible cardinality constraints of relationships (mandatory-many, optional-many, mandatory-one and optional-one).")),c.a.createElement(ie.a,{item:!0,xs:8},c.a.createElement("img",{alt:"Animation showing creating an ER diagram",src:"ERDAnimation.gif"}))))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(de.a,null,c.a.createElement(ie.a,{container:!0,className:e.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h3"},"Relational Schemas")),c.a.createElement(ie.a,{item:!0,xs:4,className:e.textAlignLeft},c.a.createElement(se.a,{variant:"h6"},"ERDPlus enables drawing standard Relational Schema components"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Tables (Relations)")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Table Columns (including Primary and Foreign Keys)")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Referential Integrity Constraint Lines (pointing from a Foreign Key to the Primary Key it refers to)"))),c.a.createElement(se.a,{variant:"body1"},"The tool supports quick creation of foreign keys and referential integrity lines by simple click-point-connect actions. This simplifies and quickens the process of creating relational schemas.")),c.a.createElement(ie.a,{item:!0,xs:8},c.a.createElement("img",{alt:"Short animation creating a relational schema",src:"RelationalSchemaAnimation.gif"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("img",{alt:"Sample relational schema diagram",src:"RelationalSchemaSample.png"}))))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(de.a,null,c.a.createElement(ie.a,{container:!0,className:e.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h3"},"Automatically Convert ER Diagrams to Relational Schemas")),c.a.createElement(ie.a,{item:!0,xs:4,className:e.textAlignLeft},c.a.createElement(se.a,{variant:"h6"},"Convert ER Diagrams"),c.a.createElement(se.a,{variant:"body1"},"ERDPlus enables automatic conversion of ER Diagrams to Relational Schemas with one click of a button. This vastly speeds up the process of creating a Relational Schema based on an ER Diagram."),c.a.createElement(se.a,{variant:"h6"},"To use this feature"),c.a.createElement("ol",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Log into your account.")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Click on the drop menu next to the name of any ER Diagram and chose \u201cConvert to Relational Schema\u201d option.")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"This will create a diagram containing the converted Relational Schema."))),c.a.createElement(se.a,{variant:"body1"})),c.a.createElement(ie.a,{item:!0,xs:8},c.a.createElement("img",{alt:"Short animation creating a relational schema",src:"RelationalSchemaAnimation.gif"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("img",{alt:"An ER diagram that can be converted into a relational schema",src:"ERDSample.png"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("img",{alt:"Sample relational schema automatically created from the ER diagram",src:"RelationalSchemaSample.png"}))))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(de.a,null,c.a.createElement(ie.a,{container:!0,className:e.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h3"},"Star Schemas")),c.a.createElement(ie.a,{item:!0,xs:4,className:e.textAlignLeft},c.a.createElement(se.a,{variant:"h6"},"ERDPlus enables drawing Star Schema components."),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Fact Tables (Facts)")),c.a.createElement("li",null,c.a.createElement(se.a,{variant:"body1"},"Dimension Tables (Dimensions)"))),c.a.createElement(se.a,{variant:"body1"},"The notation distinguishes fact tables from dimension tables by using a thicker frame around fact tables. This makes star schema diagrams easier to interpret. As with relational schemas, the tool supports quick creation of foreign keys and referential integrity lines by simple click-point-connect actions. This simplifies and quickens the process of creating star schemas.")),c.a.createElement(ie.a,{item:!0,xs:8},c.a.createElement("img",{alt:"Short animation creating a star schema",src:"StarSchemaAnimation.gif"})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement("img",{alt:"An example star schema",src:"StarSchemaSample.png"}))))),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(de.a,null,c.a.createElement(ie.a,{container:!0,className:e.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h3"},"Export SQL")),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement("img",{alt:"An example relational schema that can be converted to SQL",src:"RelationalSchemaForSql.png"})),c.a.createElement(ie.a,{item:!0,xs:6},c.a.createElement("pre",{className:e.sqlBlock},"CREATE TABLE PRODUCT\n(\n  ProductID INT NOT NULL,\n  ProductName VARCHAR(64) NOT NULL,\n  ProductPrice DECIMAL(4, 2) NOT NULL,\n  PRIMARY KEY (ProductID)\n);\n\nCREATE TABLE CUSTOMER\n(\n  CustomerID INT NOT NULL,\n  CustomerName VARCHAR(40) NOT NULL,\n  CustomerZip VARCHAR(10) NOT NULL,\n  PRIMARY KEY (CustomerID)\n);\n\nCREATE TABLE SALESTRANSACTION\n(\n  TID INT NOT NULL,\n  Tdate DATE NOT NULL,\n  CustomerID INTEGER NOT NULL,\n  PRIMARY KEY (TID),\n  FOREIGN KEY (CustomerID) REFERENCES CUSTOMER(CustomerID)\n);\n\nCREATE TABLE SOLDVIA\n(\n  ProductID INT NOT NULL,\n  TID INT NOT NULL,\n  PRIMARY KEY (ProductID, TID),\n  FOREIGN KEY (ProductID) REFERENCES PRODUCT(ProductID),\n  FOREIGN KEY (TID) REFERENCES SALESTRANSACTION(TID)\n);"))))),c.a.createElement(ie.a,{item:!0,xs:4},"Copyright \xa9 ERDPlus 2015-2019"),c.a.createElement(ie.a,{item:!0,xs:4},c.a.createElement(A.a,{to:"/privacy-policy"},"Privacy Policy")),c.a.createElement(ie.a,{item:!0,xs:4},c.a.createElement(A.a,{to:"mailto:info@erdplus.com"},"info@erdplus.com")),c.a.createElement(ie.a,{item:!0,xs:4,className:e.version},c.a.createElement(se.a,{variant:"caption"},"production"," / ","2019-11-03T15:38:52+00:00"))))}}]),t}(o.Component),xr=Object(y.withStyles)(function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},contentArea:{height:"100%"},grid:{padding:3*e.spacing.unit,textAlign:"center",marginTop:e.spacing.unit,marginBottom:e.spacing.unit},descriptionGridItem:{},descriptionPaper:{textAlign:"left",padding:20,height:440},textbookImage:{width:200,textAlign:"center",margin:20,border:"1px solid #aaa"},sqlBlock:{textAlign:"left"},textAlignLeft:{textAlign:"left"},footerGrid:{backgroundColor:"#eeeeee",textAlign:"center",paddingTop:40,paddingBottom:40},version:{textAlign:"center"},upgrade:{border:"5px solid #ff3333"}}})(Object(v.b)(function(e){return{}},function(e){return{}})(Or)),Sr=window.gapi,Dr=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.componentDidMount=function(){Ee.a.pageview("/login"),Sr.load("auth2",function(){Sr.auth2.init({client_id:"935519046542-t7la3ci754e31p6lot2mo9r36mq5d2d4.apps.googleusercontent.com"}).attachClickHandler("google-login",{},function(e){var t=e.getAuthResponse().id_token;a.props.googleLogin(t,a.props.history)},function(e){console.log(e)})})},a.handleEmailChange=function(e){a.setState({email:e.target.value})},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.handleSubmit=function(){var e=a.state,t=e.email,n=e.password;a.props.login(t,n,a.props.history)},a.handleFacebookLogin=function(){window.FB.login(function(e){a.props.facebookLogin(e,a.props.history)},{scope:"public_profile"})},a.catchReturn=function(e){if("Enter"===e.key){e.preventDefault();var t=a.state,n=t.email,r=t.password;n&&r&&a.handleSubmit()}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=this.props.classes,r=!t||!a;return c.a.createElement("section",{className:n.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,className:n.grid,spacing:24},c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(se.a,{variant:"h4"},"Login")),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"email",label:"Email",margin:"normal",className:n.textField,value:t,onChange:this.handleEmailChange,onKeyPress:this.catchReturn})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(ce.a,{id:"password",label:"Password",margin:"normal",className:n.textField,value:a,onChange:this.handlePasswordChange,type:"password",onKeyPress:this.catchReturn})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(w.a,{className:n.loginButton,disabled:r,variant:"outlined",color:"primary",onClick:this.handleSubmit},"Login")),c.a.createElement(ie.a,{item:!0,xs:4},c.a.createElement(w.a,{component:A.a,to:"/forgot-password"},"Forgot Password")),c.a.createElement(ie.a,{item:!0,xs:4},c.a.createElement(w.a,{onClick:this.handleFacebookLogin,variant:"outlined",className:n.loginButton},c.a.createElement("img",{alt:"Facebook Logo",src:"facebook-icon.png",className:n.socialButtonImage}),"Login with Facebook")),c.a.createElement(ie.a,{item:!0,xs:4},c.a.createElement(w.a,{id:"google-login",variant:"outlined",className:n.loginButton},c.a.createElement("img",{alt:"Google Logo",src:"g-logo.png",className:n.socialButtonImage}),"Signin with Google"))))}}]),t}(o.Component),Ar=Object(y.withStyles)(function(e){return{textField:{margin:e.spacing.unit,width:300},submitButton:{margin:e.spacing.unit,width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:3*e.spacing.unit,textAlign:"center"},loginButton:{margin:e.spacing.unit,width:250},socialButtonImage:{height:24,marginRight:5,backgroundColor:"#ffffff"}}})(Object(G.a)(Object(v.b)(function(e){return{}},function(e){return{login:function(t,a,n){return e(F.login(t,a,n))},facebookLogin:function(t,a){return e(F.facebookLogin(t,a))},googleLogin:function(t,a){return e(F.googleLogin(t,a))}}})(Dr))),jr=window.erd,Ir={none:[],er:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Entity",mouseMode:"entity"},{name:"Attribute",mouseMode:"attribute"},{name:"Relationship",mouseMode:"relationship"},{name:"Label",mouseMode:"label"}],relational:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Table",mouseMode:"table"},{name:"Label",mouseMode:"label"}],star:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Fact",mouseMode:"fact"},{name:"Dimension",mouseMode:"dimension"},{name:"Label",mouseMode:"label"}]},Tr=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={menuAnchor:null},a.handleSave=function(){var e=a.props,t=e.saveDiagram,n=e.editDiagram,r=a.props.getStage(),i=new jr.DiagramArchive(r);t(Object(g.a)({},n,{content:i.toJson()})),a.handleMenuClose()},a.handleImport=function(){a.props.importDiagramDialogShow(),a.handleMenuClose()},a.handleUndo=function(){var e=a.props.getStage();a.props.clearContext(),e.undoManager.undo()},a.handleRedo=function(){var e=a.props.getStage();a.props.clearContext(),e.undoManager.redo()},a.handleDelete=function(){var e=a.props.getStage();e.deleteSelection(),e.draw()},a.changeMode=function(e){var t=a.props.getStage(),n=a.props.setMouseMode;t.undoManager.hasCurrentAction()&&t.undoManager.endAction(),t.mouseMode=e,n(e)},a.handleMenuClick=function(e){a.setState({menuAnchor:e})},a.handleMenuClose=function(){a.setState({menuAnchor:null})},a.handleExportImage=function(){var e=a.props,t=e.showExportImageDialog,n=e.createExportImageData,r=e.exportImageTransparent,i=e.exportImageScale,o=a.props.getStage(),c=new jr.DiagramArchive(o).toJson();t(c),n(c,r,i),a.handleMenuClose()},a.handleResize=function(){var e=a.props.getStage().getBounds(!1);a.props.showCanvasSizeDialog(e.right,e.bottom),a.setState({menuAnchor:null})},a.newERDiagram=function(){a.handleMenuClose(),a.props.newERDiagram()},a.newRelationalSchema=function(){a.handleMenuClose(),a.props.newRelationalSchema()},a.newStarSchema=function(){a.handleMenuClose(),a.props.newStarSchema()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.menuAnchor,a=this.props,n=a.classes,r=a.diagramType,i=a.mouseMode,o=a.canUndo,l=a.canRedo,s=a.canDelete,u=Ir[r];return c.a.createElement("div",{className:n.buttonBar},c.a.createElement(mt.a,{id:"diagram-menu",open:Boolean(t),anchorEl:t,onClose:this.handleMenuClose},c.a.createElement(ht.a,{onClick:this.newERDiagram},"New ER Diagram"),c.a.createElement(ht.a,{onClick:this.newRelationalSchema},"New Relational Schema"),c.a.createElement(ht.a,{onClick:this.newStarSchema},"New Star Schema"),c.a.createElement("hr",null),c.a.createElement(ht.a,{onClick:this.handleSave},"Export ..."),c.a.createElement(ht.a,{onClick:this.handleImport},"Import ..."),c.a.createElement("hr",null),c.a.createElement(ht.a,{onClick:this.handleExportImage},"Export Image ..."),c.a.createElement(ht.a,{onClick:this.handleResize},"Canvas Size ...")),c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:function(t){return e.handleMenuClick(t.currentTarget)}},c.a.createElement(rn.a,null)," Menu"),"none"!==r&&c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:this.handleUndo,disabled:!o},c.a.createElement(Za.a,null)," Undo"),"none"!==r&&c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:this.handleRedo,disabled:!l},c.a.createElement(en.a,null)," Redo"),"none"!==r&&c.a.createElement(w.a,{variant:"outlined",className:n.button,onClick:this.handleDelete,disabled:!s},c.a.createElement(an.a,null)," Delete"),u.map(function(t){return c.a.createElement(w.a,{key:t.mouseMode,variant:"outlined",className:n.button,color:t.mouseMode===i?"primary":"default",onClick:function(){return e.changeMode(t.mouseMode)}},t.name)}))}}]),t}(o.Component),kr=Object(y.withStyles)(function(e){return{button:{marginTop:e.spacing.unit,marginBottom:0,marginLeft:e.spacing.unit,marginRight:0},buttonBar:{background:"#eeeeee",paddingBottom:10,zIndex:1e3}}})(Object(G.a)(Object(v.b)(function(e,t){return{exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale}},function(e){return{showExportImageDialog:function(t){return e(Qt.showExportImageDialog(t))},createExportImageData:function(t,a,n){return e(Qt.createExportImageData(t,a,n))},importDiagramDialogShow:function(){return e(wt.importDiagramDialogShow())}}})(Tr))),Nr=window.erd,Rr=window.saveAs,Mr=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={diagramType:"er",contextType:"",contextDetails:null,mouseMode:"none",editDiagram:null,canUndo:!1,canRedo:!1,canDelete:!1,exportImageTransparent:!1,exportImageScale:null},e.activeItemChangedCallback=function(t){e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),t?e.setState({contextType:t.getType(),contextDetails:t.details}):e.setState({contextType:"",contextDetails:null})},e.clearContext=function(){e.setState({contextType:"",contextDetails:null})},e.startMoveCallback=function(){e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),e.stage.undoManager.startAction()},e.endMoveCallback=function(){e.stage.undoManager.endAction(),e.dirtyCallback()},e.connectModeEndCallback=function(){},e.dirtyCallback=function(){e.setState({canUndo:e.stage.undoManager.canUndo(),canRedo:e.stage.undoManager.canRedo()})},e.mouseModeResetCallback=function(t){e.setState({mouseMode:t})},e.selectedCountChange=function(){e.setState({canDelete:e.stage.selectedCount()>0})},e.newERDiagram=function(){e.newDiagram("er")},e.newRelationalSchema=function(){e.newDiagram("relational")},e.newStarSchema=function(){e.newDiagram("star")},e.newDiagram=function(t){var a=JSON.stringify({version:2,www:"erdplus.com",shapes:[],connectors:[],width:2e3,height:1e3}),n=new Nr.DiagramArchive(e.stage).fromJson(a);e.setState({diagramType:t}),e.props.setCanvasSize(n.width,n.height)},e.getStage=function(){return e.stage},e.setMouseMode=function(t){e.setState({mouseMode:t})},e.saveDiagram=function(e){var t=new Blob([e.content],{type:"text/plain;charset=utf-8"});Rr(t,"".concat(e.name,".erdplus"))},e.importDiagrams=function(t){if(1===t.length){var a=t[0],n=new Nr.DiagramArchive(e.stage).fromJson(a.content);e.setState({diagramType:a.diagramType}),e.props.setCanvasSize(n.width,n.height),e.props.importDiagramDialogCancel(),setTimeout(function(){return e.stage.draw()},0)}},e.showCanvasSizeDialog=function(t,a){e.props.showCanvasSizeDialog(t,a)},e.isReady=!1,e.canvasElement=c.a.createRef(),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Ee.a.pageview("/standalone");var e={activeItemChangedCallback:this.activeItemChangedCallback,startMoveCallback:this.startMoveCallback,endMoveCallback:this.endMoveCallback,connectModeEndCallback:this.connectModeEndCallback,dirtyCallback:this.dirtyCallback,mouseModeResetCallback:this.mouseModeResetCallback,selectedCountChange:this.selectedCountChange};this.stage=new Nr.DiagramStage(this.canvasElement.current,e)}},{key:"render",value:function(){var e=this.state,t=e.diagramType,a=e.contextType,n=e.contextDetails,r=e.mouseMode,i=e.editDiagram,o=e.canUndo,l=e.canRedo,s=e.canDelete,u=e.exportImageTransparent,d=e.exportImageScale,m=this.props,p=m.classes,h=m.canvasWidth,g=m.canvasHeight,f=[p.canvas];return"connect"===r&&f.push(p.canvasConnectMode),c.a.createElement("section",{className:p.section},c.a.createElement(ne,null),c.a.createElement(pn,null),c.a.createElement(fn,{getStage:this.getStage}),c.a.createElement(Ga,{importDiagrams:this.importDiagrams,standalone:!0}),c.a.createElement(kr,{diagramType:t,getStage:this.getStage,setMouseMode:this.setMouseMode,saveDiagram:this.saveDiagram,showCanvasSizeDialog:this.showCanvasSizeDialog,mouseMode:r,editDiagram:i,canUndo:o,canRedo:l,canDelete:s,exportImageTransparent:u,exportImageScale:d,newERDiagram:this.newERDiagram,newRelationalSchema:this.newRelationalSchema,newStarSchema:this.newStarSchema,clearContext:this.clearContext}),c.a.createElement("div",{className:p.contextArea},"Entity"===a&&c.a.createElement(vn,{key:n.id,contextDetails:n,getStage:this.getStage}),"Attribute"===a&&c.a.createElement(On,{key:n.id,contextDetails:n,getStage:this.getStage}),"Relationship"===a&&c.a.createElement(Tn,{key:n.id,contextDetails:n,getStage:this.getStage}),"Label"===a&&c.a.createElement(Nn,{key:n.id,contextDetails:n,getStage:this.getStage}),"Table"===a&&c.a.createElement(rr,{key:n.id,contextDetails:n,getStage:this.getStage}),"Dimension"===a&&c.a.createElement(rr,{key:n.id,contextDetails:n,getStage:this.getStage}),"Fact"===a&&c.a.createElement(rr,{key:n.id,contextDetails:n,getStage:this.getStage})),c.a.createElement("div",{className:p.canvasParent},c.a.createElement("canvas",{className:f.join(" "),width:h,height:g,ref:this.canvasElement})))}}]),t}(o.Component),Fr=Object(y.withStyles)(function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},contextArea:{paddingTop:120,position:"fixed",top:0,right:0,width:320,height:"100%",overflow:"auto",background:"#eeeeee",padding:5},canvasParent:{overflow:"scroll",height:"100%",marginRight:320},canvas:{border:"1px solid #aaa",margin:0,backgroundColor:e.palette.background.paper},canvasConnectMode:{cursor:"crosshair"}}})(Object(G.a)(Object(v.b)(function(e,t){return{canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight}},function(e){return{setCanvasSize:function(t,a){return e(Qt.setCanvasSize(t,a))},showCanvasSizeDialog:function(t,a){return e(Qt.showCanvasSizeDialog(t,a))},importDiagramDialogCancel:function(){return e(wt.importDiagramDialogCancel())}}})(Mr))),Pr=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("section",{className:e.section},c.a.createElement(ne,null),c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12,className:e.center},c.a.createElement(se.a,{variant:"h3"},"404")),c.a.createElement(ie.a,{item:!0,xs:12,className:e.center},c.a.createElement(se.a,{variant:"h3"},"Page Not Found"))))}}]),t}(o.Component),_r=Object(y.withStyles)(function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},center:{textAlign:"center",marginTop:25}}})(Object(v.b)(function(e){return{}},function(e){return{}})(Pr)),Lr={default:{zIndex:{appBar:1250},typography:{useNextVariants:!0}},amber:{palette:{primary:{main:"#536DFE"},secondary:{main:"#FF5C93"},warning:{main:"#FFC260"},success:{main:"#3CD4A0"},info:{main:"#9013FE"},text:{primary:"#4C3310",secondary:"#4C3310",hint:"#4C3310"}},zIndex:{appBar:1250},typography:{useNextVariants:!0}}},Br=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("section",{className:e.section},c.a.createElement(ie.a,{container:!0,spacing:8},c.a.createElement(ie.a,{item:!0,xs:12,className:e.center},c.a.createElement(z.a,{className:e.spinner})),c.a.createElement(ie.a,{item:!0,xs:12,className:e.center},c.a.createElement(se.a,{variant:"h4"},"Loading"))))}}]),t}(o.Component),Ur=Object(y.withStyles)(function(e){return{section:{height:"100%",display:"flex",flexFlow:"column",backgroundColor:"#d0d0d0"},"@keyframes rotator":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},spinner:{animation:"rotator 1.4s linear infinite",width:125,height:125,color:"#4C3310"},center:{textAlign:"center"}}})(Object(f.a)(Object(v.b)(function(e){return{}},function(e){return{}})(Br))),Gr=Object(y.createMuiTheme)(Object(g.a)({},Lr.amber)),qr=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.verifyToken(this.props.history)}},{key:"render",value:function(){console.log("theme: ",Gr);var e=this.props,t=e.isLoggedIn,a=e.verifyTokenComplete;return c.a.createElement(y.MuiThemeProvider,{theme:Gr},!a&&c.a.createElement(b.a,{component:Ur}),a&&c.a.createElement(E.a,null,c.a.createElement(b.a,{exact:!0,path:"/",component:xr}),c.a.createElement(b.a,{exact:!0,path:"/faq",component:yr}),c.a.createElement(b.a,{exact:!0,path:"/privacy-policy",component:wr}),c.a.createElement(b.a,{exact:!0,path:"/reset-password/:token",component:fr}),!t&&c.a.createElement(b.a,{exact:!0,path:"/standalone",component:Fr}),!t&&c.a.createElement(b.a,{exact:!0,path:"/login",component:Ar}),!t&&c.a.createElement(b.a,{exact:!0,path:"/create-account",component:Oe}),!t&&c.a.createElement(b.a,{exact:!0,path:"/forgot-password",component:Er}),t&&c.a.createElement(b.a,{exact:!0,path:"/account",component:Ce}),t&&c.a.createElement(b.a,{exact:!0,path:"/documents",component:Ja}),t&&c.a.createElement(b.a,{exact:!0,path:"/edit-diagram/:id",component:cr}),c.a.createElement(b.a,{component:_r})))}}]),t}(o.Component),zr=Object(f.a)(Object(v.b)(function(e){return{isLoggedIn:e.auth.isLoggedIn,verifyTokenComplete:e.auth.verifyTokenComplete}},function(e){return{verifyToken:function(t){return e(F.verifyToken(t))},getFolders:function(){return e(zt.getFolders())},getDiagrams:function(){return e(wt.getDiagrams())},getAccount:function(){return e(be.getAccount())}}})(qr)),Wr=a(131),Hr=a.n(Wr),Kr=a(570);var Vr=function(e){var t=e.history;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Hr.a,null),c.a.createElement(Kr.a,{history:t},c.a.createElement(zr,null)))},Yr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Qr(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Jr=a(76),Xr=a(252),Zr=a(10),$r=a.n(Zr),ei=a(2),ti=a(247),ai=a.n(ti),ni=a(248),ri=a.n(ni),ii=function(){return window.localStorage.getItem("ApiToken")},oi=function(e){window.localStorage.setItem("ApiToken",e)},ci=function(){window.localStorage.removeItem("ApiToken")},li=function(e){try{return e?ri()(e):null}catch(t){return ci(),null}},si={apiUrl:"https://delcgtquxh.execute-api.us-east-1.amazonaws.com/prod/"},ui=Object(g.a)({},si),di=ai.a.create({baseURL:ui.apiUrl});function mi(){var e={accept:"application/json"},t=ii();return t&&(e.Authorization=t),e}function pi(e){return di.get(e,{headers:mi()})}function hi(e,t){return di.post(e,t,{headers:mi()})}function gi(e,t){return di.put(e,t,{headers:mi()})}function fi(e){return di.delete(e,{headers:mi()})}function bi(){return pi("/api/session")}function Ei(e){return hi("/api/session",e)}function vi(e){return hi("/api/facebook-session",e)}function yi(e){return hi("/api/google-session",e)}function Ci(){return pi("/api/folders")}function wi(e){return hi("/api/folders",e)}function Oi(e){return gi("/api/folders/".concat(e.id),e)}function xi(){return pi("/api/diagrams")}function Si(e){return gi("/api/diagrams/".concat(e.id),e)}function Di(e){return hi("/api/diagrams",e)}function Ai(e){return fi("/api/diagrams/".concat(e))}function ji(){return pi("/api/account")}function Ii(e){return hi("/api/account",e)}function Ti(e){return gi("/api/account",e)}function ki(){return fi("/api/account")}function Ni(e){return hi("/api/account/password",e)}function Ri(e){return hi("/api/reset-password",e)}function Mi(e){return gi("/api/reset-password/".concat(e.token),{password:e.password})}var Fi=$r.a.mark(Hi),Pi=$r.a.mark(Ki),_i=$r.a.mark(Yi),Li=$r.a.mark(Qi),Bi=$r.a.mark(Ji),Ui=$r.a.mark(Xi),Gi=$r.a.mark(Zi),qi=$r.a.mark($i),zi=$r.a.mark(eo),Wi=$r.a.mark(to);function Hi(e){var t,a,n;return $r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ei.c)(U.setBusy());case 3:return r.next=5,Object(ei.b)(Ei,{email:e.email,password:e.password});case 5:return t=r.sent,a=t.data.accessToken,oi(a),n=li(a),r.next=11,Object(ei.c)(wt.getDiagrams());case 11:return r.next=13,Object(ei.c)(zt.getFolders());case 13:return r.next=15,Object(ei.c)(be.getAccount());case 15:return r.next=17,Object(ei.c)(F.loginSuccess(n));case 17:e.history.push("/documents"),Ee.a.event({category:"user login",action:"email"}),r.next=25;break;case 21:return r.prev=21,r.t0=r.catch(0),r.next=25,Object(ei.c)(U.showToast("Error"));case 25:return r.prev=25,r.next=28,Object(ei.c)(U.clearBusy());case 28:return r.finish(25);case 29:case"end":return r.stop()}},Fi,this,[[0,21,25,29]])}function Ki(e){return $r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ei.c)(U.setBusy());case 3:return ci(),t.next=6,Object(ei.c)(F.logoutSuccess());case 6:return t.next=8,Object(ei.c)(wt.getDiagramsSuccess([]));case 8:return t.next=10,Object(ei.c)(zt.getFoldersSuccess([]));case 10:return t.next=12,Object(ei.c)(be.getAccountSuccess({}));case 12:e.history.push("/"),t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(0),t.next=19,Object(ei.c)(U.showToast("Error"));case 19:return t.prev=19,t.next=22,Object(ei.c)(U.clearBusy());case 22:return t.finish(19);case 23:case"end":return t.stop()}},Pi,this,[[0,15,19,23]])}var Vi=new RegExp("^(/account|/documents|/edit-diagram)");function Yi(e){var t;return $r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ei.c)(U.setBusy());case 3:return a.next=5,Object(ei.b)(bi);case 5:if(200!==a.sent.status){a.next=18;break}return t=li(ii()),a.next=10,Object(ei.c)(wt.getDiagrams());case 10:return a.next=12,Object(ei.c)(zt.getFolders());case 12:return a.next=14,Object(ei.c)(be.getAccount());case 14:return a.next=16,Object(ei.c)(F.verifyTokenSuccess(t));case 16:a.next=23;break;case 18:return Vi.test(e.history.location.pathname)&&e.history.push("/"),a.next=21,Object(ei.b)(ci);case 21:return a.next=23,Object(ei.c)(F.verifyTokenFailure());case 23:a.next=32;break;case 25:return a.prev=25,a.t0=a.catch(0),Vi.test(e.history.location.pathname)&&e.history.push("/"),a.next=30,Object(ei.b)(ci);case 30:return a.next=32,Object(ei.c)(F.verifyTokenFailure());case 32:return a.prev=32,a.next=35,Object(ei.c)(U.clearBusy());case 35:return a.finish(32);case 36:case"end":return a.stop()}},_i,this,[[0,25,32,36]])}function Qi(e){var t,a,n,r,i;return $r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(ei.c)(U.setBusy());case 3:if("connected"===(t=e.response).status){o.next=9;break}return o.next=7,Object(ei.c)(F.loginFailure());case 7:o.next=26;break;case 9:return a=t.authResponse.accessToken,o.next=12,Object(ei.b)(vi,{accessToken:a});case 12:return n=o.sent,r=n.data.accessToken,oi(r),i=li(r),o.next=18,Object(ei.c)(wt.getDiagrams());case 18:return o.next=20,Object(ei.c)(zt.getFolders());case 20:return o.next=22,Object(ei.c)(be.getAccount());case 22:return o.next=24,Object(ei.c)(F.loginSuccess(i));case 24:e.history.push("/documents"),Ee.a.event({category:"user login",action:"facebook"});case 26:o.next=32;break;case 28:return o.prev=28,o.t0=o.catch(0),o.next=32,Object(ei.c)(U.showToast("Error"));case 32:return o.prev=32,o.next=35,Object(ei.c)(U.clearBusy());case 35:return o.finish(32);case 36:case"end":return o.stop()}},Li,this,[[0,28,32,36]])}function Ji(e){var t,a,n,r;return $r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(ei.c)(U.setBusy());case 3:return t=e.idToken,i.next=6,Object(ei.b)(yi,{idToken:t});case 6:return a=i.sent,n=a.data.accessToken,oi(n),r=li(n),i.next=12,Object(ei.c)(wt.getDiagrams());case 12:return i.next=14,Object(ei.c)(zt.getFolders());case 14:return i.next=16,Object(ei.c)(be.getAccount());case 16:return i.next=18,Object(ei.c)(F.loginSuccess(r));case 18:e.history.push("/documents"),Ee.a.event({category:"user login",action:"google"}),i.next=26;break;case 22:return i.prev=22,i.t0=i.catch(0),i.next=26,Object(ei.c)(U.showToast("Error"));case 26:return i.prev=26,i.next=29,Object(ei.c)(U.clearBusy());case 29:return i.finish(26);case 30:case"end":return i.stop()}},Bi,this,[[0,22,26,30]])}function Xi(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(M.LOGIN,Hi);case 2:case"end":return e.stop()}},Ui,this)}function Zi(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(M.LOGOUT,Ki);case 2:case"end":return e.stop()}},Gi,this)}function $i(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(M.VERIFY_TOKEN,Yi);case 2:case"end":return e.stop()}},qi,this)}function eo(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(M.FACEBOOK_LOGIN,Qi);case 2:case"end":return e.stop()}},zi,this)}function to(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(M.GOOGLE_LOGIN,Ji);case 2:case"end":return e.stop()}},Wi,this)}var ao=$r.a.mark(lo),no=$r.a.mark(so),ro=$r.a.mark(uo),io=$r.a.mark(mo),oo=$r.a.mark(po),co=$r.a.mark(ho);function lo(){var e,t;return $r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ei.c)(U.setBusy());case 3:return a.next=5,Object(ei.b)(Ci);case 5:return e=a.sent,t=e.data,a.next=9,Object(ei.c)(zt.getFoldersSuccess(t));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(ei.c)(U.showToast("Error"));case 15:return a.prev=15,a.next=18,Object(ei.c)(U.clearBusy());case 18:return a.finish(15);case 19:case"end":return a.stop()}},ao,this,[[0,11,15,19]])}function so(e){var t,a;return $r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ei.c)(U.setBusy());case 3:return n.next=5,Object(ei.b)(wi,{name:e.name,parentId:e.parentId});case 5:return t=n.sent,a=t.data,n.next=9,Object(ei.c)(zt.createFolderSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(ei.c)(U.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(ei.c)(U.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}},no,this,[[0,11,15,19]])}function uo(e){var t,a;return $r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ei.c)(U.setBusy());case 3:return n.next=5,Object(ei.b)(Oi,e.folder);case 5:return t=n.sent,a=t.data,n.next=9,Object(ei.c)(zt.renameFolderSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(ei.c)(U.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(ei.c)(U.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}},ro,this,[[0,11,15,19]])}function mo(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(qt.GET_FOLDERS,lo);case 2:case"end":return e.stop()}},io,this)}function po(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(qt.CREATE_FOLDER,so);case 2:case"end":return e.stop()}},oo,this)}function ho(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(qt.RENAME_FOLDER,uo);case 2:case"end":return e.stop()}},co,this)}var go="er",fo="relational",bo="star",Eo=["Entity","Attribute","Relationship"],vo=["Table"],yo=["Dimension","Fact"],Co=function(e,t){return new Promise(function(a,n){var r=new FileReader;r.onabort=function(){n({name:e.name,ok:!1})},r.onerror=function(){n({name:e.name,ok:!1})},r.onload=function(r){try{var i=JSON.parse(r.target.result),o=function(e){if(e&&Array.isArray(e.shapes)){var t=e.shapes;if(-1!==t.findIndex(function(e){return Eo.includes(e.type)}))return go;if(-1!==t.findIndex(function(e){return vo.includes(e.type)}))return fo;if(-1!==t.findIndex(function(e){return yo.includes(e.type)}))return bo}throw new Error("Unkwnon Diagram Type")}(i);a({name:e.name,ok:!0,diagram:{folderId:t,name:e.name,diagramType:o,content:JSON.stringify(i)}})}catch(c){n({name:e.name,ok:!1})}},r.readAsText(e)})},wo=window.erd,Oo=function(e,t,a){console.log("createImage ");var n={activeItemChangedCallback:function(){},startMoveCallback:function(){},endMoveCallback:function(){},connectModeEndCallback:function(){},dirtyCallback:function(){},mouseModeResetCallback:function(){}};return new Promise(function(r,i){var o=document.createElement("canvas"),c=document.createElement("canvas"),l=new wo.DiagramStage(o,n);new wo.DiagramArchive(l).fromJson(e);var s=l.getBounds(!1),u=s.left*a,d=s.right*a,m=s.top*a,p=s.bottom*a,h=d-u,g=p-m;u>0&&(u-=2,h+=2),m>0&&(m-=2,g+=2),console.log("bounds ",u,m,d,p),o.width=d,o.height=p,c.width=h+50,c.height=g+50,l.setScale(a,a),l.draw();var f=c.getContext("2d");f.clearRect(0,0,c.width,c.height),t||(f.beginPath(),f.fillStyle="#fff",f.rect(0,0,c.width,c.height),f.fill()),f.drawImage(o,u,m,h,g,25,25,h,g);var b=c.toDataURL("image/png");c.toBlob(function(e){r({dataUrl:b,blob:e})})})},xo=$r.a.mark(Uo),So=$r.a.mark(Go),Do=$r.a.mark(qo),Ao=$r.a.mark(zo),jo=$r.a.mark(Wo),Io=$r.a.mark(Ho),To=$r.a.mark(Ko),ko=$r.a.mark(Vo),No=$r.a.mark(Yo),Ro=$r.a.mark(Qo),Mo=$r.a.mark(Jo),Fo=$r.a.mark(Xo),Po=$r.a.mark(Zo),_o=$r.a.mark($o),Lo=$r.a.mark(ec),Bo=$r.a.mark(tc);function Uo(){var e,t;return $r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ei.c)(U.setBusy());case 3:return a.next=5,Object(ei.b)(xi);case 5:return e=a.sent,t=e.data,a.next=9,Object(ei.c)(wt.getDiagramsSuccess(t));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(ei.c)(U.showToast("Error"));case 15:return a.prev=15,a.next=18,Object(ei.c)(U.clearBusy());case 18:return a.finish(15);case 19:case"end":return a.stop()}},xo,this,[[0,11,15,19]])}function Go(e){var t,a;return $r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ei.c)(U.setBusy());case 3:return n.next=5,Object(ei.b)(Si,e.diagram);case 5:return t=n.sent,a=t.data,n.next=9,Object(ei.c)(wt.saveDiagramSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(ei.c)(U.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(ei.c)(U.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}},So,this,[[0,11,15,19]])}function qo(e){var t,a;return $r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ei.c)(U.setBusy());case 3:return n.next=5,Object(ei.b)(Di,e.diagram);case 5:return t=n.sent,a=t.data,n.next=9,Object(ei.c)(wt.createDiagramSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(ei.c)(U.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(ei.c)(U.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}},Do,this,[[0,11,15,19]])}function zo(e){return $r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ei.c)(U.setBusy());case 3:return t.next=5,Object(ei.b)(Ai,e.diagramId);case 5:return t.next=7,Object(ei.c)(wt.getDiagrams());case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(ei.c)(U.showToast("Error"));case 13:return t.prev=13,t.next=16,Object(ei.c)(U.clearBusy());case 16:return t.finish(13);case 17:case"end":return t.stop()}},Ao,this,[[0,9,13,17]])}function Wo(e){var t;return $r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ei.c)(U.setBusy());case 3:return a.next=5,Object(ei.b)(Co,e.file,e.currentFolderId);case 5:return t=a.sent,a.next=8,Object(ei.c)(wt.dropImportFileSuccess(t));case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(0),a.next=14,Object(ei.c)(wt.dropImportFileFailure(a.t0));case 14:return a.prev=14,a.next=17,Object(ei.c)(U.clearBusy());case 17:return a.finish(14);case 18:case"end":return a.stop()}},jo,this,[[0,10,14,18]])}function Ho(e){var t,a,n;return $r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ei.c)(U.setBusy());case 3:return t=e.diagrams,r.next=6,Object(ei.a)(t.map(function(e){return Object(ei.b)(Di,e)}));case 6:return a=r.sent,n=a.map(function(e){return e.data}),r.next=10,Object(ei.c)(wt.importDiagramsSuccess(n));case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(0),r.next=16,Object(ei.c)(wt.importDiagramsFailure());case 16:return r.prev=16,r.next=19,Object(ei.c)(U.clearBusy());case 19:return r.finish(16);case 20:case"end":return r.stop()}},Io,this,[[0,12,16,20]])}function Ko(e){var t,a,n,r;return $r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=e.diagramContent,a=e.transparent,n=e.scale,i.next=4,Object(ei.b)(Oo,t,a,n);case 4:return r=i.sent,i.next=7,Object(ei.c)(Qt.createExportImageDataSuccess(r.dataUrl,r.blob));case 7:i.next=13;break;case 9:return i.prev=9,i.t0=i.catch(0),i.next=13,Object(ei.c)(U.showToast("Error"));case 13:case"end":return i.stop()}},To,this,[[0,9]])}function Vo(e){var t,a;return $r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ei.c)(U.setBusy());case 3:return n.next=5,Object(ei.a)(e.diagrams.map(function(e){return Object(ei.b)(Si,e)}));case 5:return t=n.sent,a=t.map(function(e){return e.data}),n.next=9,Object(ei.c)(wt.saveManyDiagramsSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(ei.c)(U.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(ei.c)(U.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}},ko,this,[[0,11,15,19]])}function Yo(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Ct.GET_DIAGRAMS,Uo);case 2:case"end":return e.stop()}},No,this)}function Qo(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Ct.SAVE_DIAGRAM,Go);case 2:case"end":return e.stop()}},Ro,this)}function Jo(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Ct.CREATE_DIAGRAM,qo);case 2:case"end":return e.stop()}},Mo,this)}function Xo(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Ct.DELETE_DIAGRAM,zo);case 2:case"end":return e.stop()}},Fo,this)}function Zo(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Ct.DROP_IMPORT_FILE,Wo);case 2:case"end":return e.stop()}},Po,this)}function $o(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Ct.IMPORT_DIAGRAMS,Ho);case 2:case"end":return e.stop()}},_o,this)}function ec(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Yt.CREATE_EXPORT_IMAGE_DATA,Ko);case 2:case"end":return e.stop()}},Lo,this)}function tc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Ct.SAVE_MANY_DIAGRAMS,Vo);case 2:case"end":return e.stop()}},Bo,this)}var ac=$r.a.mark(mc),nc=$r.a.mark(pc),rc=$r.a.mark(hc),ic=$r.a.mark(gc),oc=$r.a.mark(fc),cc=$r.a.mark(bc),lc=$r.a.mark(Ec),sc=$r.a.mark(vc),uc=$r.a.mark(yc),dc=$r.a.mark(Cc);function mc(e){return $r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ei.c)(U.setBusy());case 3:return t.next=5,Object(ei.b)(Ii,{name:e.name,email:e.email,password:e.password});case 5:return t.next=7,Object(ei.c)(F.login(e.email,e.password,e.history));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(ei.c)(U.showToast("Error"));case 13:return t.prev=13,t.next=16,Object(ei.c)(U.clearBusy());case 16:return t.finish(13);case 17:case"end":return t.stop()}},ac,this,[[0,9,13,17]])}function pc(e){var t,a;return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ei.c)(U.setBusy());case 3:return e.next=5,Object(ei.b)(ji);case 5:return t=e.sent,a=t.data,e.next=9,Object(ei.c)(be.getAccountSuccess(a));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),e.next=15,Object(ei.c)(U.showToast("Error"));case 15:return e.prev=15,e.next=18,Object(ei.c)(U.clearBusy());case 18:return e.finish(15);case 19:case"end":return e.stop()}},nc,this,[[0,11,15,19]])}function hc(e){var t,a;return $r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ei.c)(U.setBusy());case 3:return n.next=5,Object(ei.b)(Ti,{name:e.name});case 5:return t=n.sent,a=t.data,n.next=9,Object(ei.c)(be.updateAccountSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(ei.c)(U.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(ei.c)(U.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}},rc,this,[[0,11,15,19]])}function gc(e){var t,a;return $r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ei.c)(U.setBusy());case 3:return t=e.currentPassword,a=e.newPassword,n.next=6,Object(ei.b)(Ni,{currentPassword:t,newPassword:a});case 6:return n.next=8,Object(ei.c)(be.changePasswordSuccess());case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(ei.c)(U.showToast("Error"));case 14:return n.prev=14,n.next=17,Object(ei.c)(U.clearBusy());case 17:return n.finish(14);case 18:case"end":return n.stop()}},ic,this,[[0,10,14,18]])}function fc(e){return $r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ei.c)(U.setBusy());case 3:return t.next=5,Object(ei.b)(ki);case 5:return ci(),t.next=8,Object(ei.c)(F.logoutSuccess());case 8:return t.next=10,Object(ei.c)(wt.getDiagramsSuccess([]));case 10:return t.next=12,Object(ei.c)(zt.getFoldersSuccess([]));case 12:return t.next=14,Object(ei.c)(be.getAccountSuccess({}));case 14:e.history.push("/"),t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(0),t.next=21,Object(ei.c)(U.showToast("Error"));case 21:return t.prev=21,t.next=24,Object(ei.c)(U.clearBusy());case 24:return t.finish(21);case 25:case"end":return t.stop()}},oc,this,[[0,17,21,25]])}function bc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(fe.CREATE_ACCOUNT,mc);case 2:case"end":return e.stop()}},cc,this)}function Ec(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(fe.GET_ACCOUNT,pc);case 2:case"end":return e.stop()}},lc,this)}function vc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(fe.UPDATE_ACCOUNT,hc);case 2:case"end":return e.stop()}},sc,this)}function yc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(fe.CHANGE_PASSWORD,gc);case 2:case"end":return e.stop()}},uc,this)}function Cc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(fe.DELETE_ACCOUNT,fc);case 2:case"end":return e.stop()}},dc,this)}var wc=$r.a.mark(Dc),Oc=$r.a.mark(Ac),xc=$r.a.mark(jc),Sc=$r.a.mark(Ic);function Dc(e){var t,a,n,r;return $r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(ei.c)(U.setBusy());case 3:return i.next=5,Object(ei.b)(Ri,{email:e.email});case 5:return t=i.sent,a=t.data,n=a.email,r=a.duration,i.next=9,Object(ei.c)(pr.resetPasswordStartSuccess(n,r));case 9:i.next=17;break;case 11:return i.prev=11,i.t0=i.catch(0),i.next=15,Object(ei.c)(pr.resetPasswordStartFailure("some error"));case 15:return i.next=17,Object(ei.c)(U.showToast("Error"));case 17:return i.prev=17,i.next=20,Object(ei.c)(U.clearBusy());case 20:return i.finish(17);case 21:case"end":return i.stop()}},wc,this,[[0,11,17,21]])}function Ac(e){var t,a,n;return $r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ei.c)(U.setBusy());case 3:return r.next=5,Object(ei.b)(Mi,{token:e.token,password:e.password});case 5:return t=r.sent,r.next=8,Object(ei.c)(pr.resetPasswordCompleteSuccess());case 8:return a=t.data.accessToken,oi(a),n=li(a),r.next=13,Object(ei.c)(wt.getDiagrams());case 13:return r.next=15,Object(ei.c)(zt.getFolders());case 15:return r.next=17,Object(ei.c)(be.getAccount());case 17:return r.next=19,Object(ei.c)(F.loginSuccess(n));case 19:e.history.push("/documents"),r.next=28;break;case 22:return r.prev=22,r.t0=r.catch(0),r.next=26,Object(ei.c)(pr.resetPasswordCompleteFailure("some error"));case 26:return r.next=28,Object(ei.c)(U.showToast("Error"));case 28:return r.prev=28,r.next=31,Object(ei.c)(U.clearBusy());case 31:return r.finish(28);case 32:case"end":return r.stop()}},Oc,this,[[0,22,28,32]])}function jc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(mr.RESET_PASSWORD_START,Dc);case 2:case"end":return e.stop()}},xc,this)}function Ic(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(mr.RESET_PASSWORD_COMPLETE,Ac);case 2:case"end":return e.stop()}},Sc,this)}var Tc=a(249),kc=a.n(Tc),Nc=a(250),Rc=a.n(Nc),Mc=$r.a.mark(Lc),Fc=$r.a.mark(Bc),Pc=$r.a.mark(Uc),_c=$r.a.mark(Gc);function Lc(e){var t,a,n,r,i,o,c,l,s,u;return $r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,Object(ei.c)(U.setBusy());case 3:return t=e.folderId,a=e.name,n=e.content,r=e.edit,i=e.history,o=new kc.a(n),c=JSON.stringify(o.convert()),l={folderId:t,name:a,content:c,diagramType:"relational"},d.next=9,Object(ei.b)(Di,l);case 9:return s=d.sent,u=s.data,d.next=13,Object(ei.c)(wt.createDiagramSuccess(u));case 13:return d.next=15,Object(ei.c)(jt.hideConvertToRelationalDialog());case 15:r&&i.push("/edit-diagram/".concat(u.id)),d.next=22;break;case 18:return d.prev=18,d.t0=d.catch(0),d.next=22,Object(ei.c)(U.showToast("Error"));case 22:return d.prev=22,d.next=25,Object(ei.c)(U.clearBusy());case 25:return d.finish(22);case 26:case"end":return d.stop()}},Mc,this,[[0,18,22,26]])}function Bc(e){var t,a,n;return $r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ei.c)(U.setBusy());case 3:return t=e.content,a=new Rc.a(t),n=a.generate(),r.next=8,Object(ei.c)(jt.generateSqlSuccess(n));case 8:r.next=16;break;case 10:return r.prev=10,r.t0=r.catch(0),r.next=14,Object(ei.c)(U.showToast("Error"));case 14:return r.next=16,Object(ei.c)(jt.generateSqlFailure());case 16:return r.prev=16,r.next=19,Object(ei.c)(U.clearBusy());case 19:return r.finish(16);case 20:case"end":return r.stop()}},Fc,this,[[0,10,16,20]])}function Uc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(At.CONVERT_TO_RELATIONAL,Lc);case 2:case"end":return e.stop()}},Pc,this)}function Gc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(At.GENERATE_SQL,Bc);case 2:case"end":return e.stop()}},_c,this)}var qc=$r.a.mark(Wc),zc=$r.a.mark(Hc);function Wc(e){var t,a;return $r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ei.c)(U.setBusy());case 3:return n.next=5,Object(ei.b)(Si,e.diagram);case 5:return t=n.sent,a=t.data,n.next=9,Object(ei.c)(wt.saveDiagramSuccess(a));case 9:return n.next=11,Object(ei.c)(Qt.setIsDirty(!1));case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,Object(ei.c)(U.showToast("Error"));case 17:return n.prev=17,n.next=20,Object(ei.c)(U.clearBusy());case 20:return n.finish(17);case 21:case"end":return n.stop()}},qc,this,[[0,13,17,21]])}function Hc(){return $r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ei.d)(Yt.SAVE_EDIT_DIAGRAM,Wc);case 2:case"end":return e.stop()}},zc,this)}var Kc=Object(Jr.c)({account:ge,auth:R,diagram:yt,edit:Vt,folder:Gt,resetPassword:dr,convert:Dt,global:B}),Vc=a(251),Yc=a.n(Vc);Ee.a.initialize("UA-28400705-1",{titleCase:!1,debug:!0});var Qc,Jc=Yc()(),Xc=function(){var e=Object(Xr.a)(),t=[e].map(function(e){return Object(Jr.a)(e)}),a=Jr.d.apply(void 0,Object(xe.a)(t)),n=Object(Jr.e)(Kc,{},a);return e.run(Xi),e.run(Zi),e.run($i),e.run(eo),e.run(to),e.run(mo),e.run(po),e.run(ho),e.run(Yo),e.run(Qo),e.run(Jo),e.run(Xo),e.run(Zo),e.run($o),e.run(ec),e.run(tc),e.run(bc),e.run(Ec),e.run(vc),e.run(yc),e.run(Cc),e.run(jc),e.run(Ic),e.run(Uc),e.run(Gc),e.run(Hc),n}();Qc=Vr,s.a.render(c.a.createElement(v.a,{store:Xc},c.a.createElement(Qc,{history:Jc})),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Yr?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Qr(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Qr(e)})}}()}},[[299,2,1]]]);
//# sourceMappingURL=main.25b8b995.chunk.js.map